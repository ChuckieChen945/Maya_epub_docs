<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Scripting">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-375E6B07-A022-45FE-A757-D213B23A0227">
<meta name="language" content="CHS">
<title>了解初始状态属性</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-375E6B07-A022-45FE-A757-D213B23A0227">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>了解初始状态属性</h1></div>
</div>
</div>

<div class="body"><p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA6"> 对于所有静态每粒子属性，Maya 均保持一个名称以 0 结尾的对应属性。例如，静态属性位置、速度和加速度具有对应的 position0、velocity0 和 acceleration0。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA4">以 0 结尾的属性名称保存属性的初始状态值。当为初始状态使用保存粒子对象的当前属性值时，Maya 会为初始状态属性指定这些值。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA3">若要为初始状态使用保存粒子对象的属性值，请从<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-484609C5-6A07-4E2E-97FF-E908216828E1">“动力学”(Dynamics)</span>菜单集中使用其中的任一命令：</p>
<ul class="ul" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA2"><li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA1">
<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-F31E7908-9730-4158-B83D-44976F6F5EEB">解算器 &gt; 初始状态 &gt; 为选定对象设置(Solvers &gt; Initial State &gt; Set for Selected)</span>
</li>
</ul>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-FA0">将为选定的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-3D088FD3-3D39-4E0B-88C5-7673B1B1C410">“粒子形状”(particle shape)</span>节点或刚体保存所有每粒子属性值。</p>
<ul class="ul" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F9F"><li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F9E">
<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-891D2347-4284-457B-B938-EC3DFD045740">解算器 &gt; 初始状态 &gt; 为所有动力学对象设置(Solvers &gt; Initial State &gt; Set for All Dynamic)</span>
</li>
</ul>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F9D"> 将为场景中的所有动力学对象（换句话说，即所有<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-8C62AF01-E828-4DC1-B2CF-A6C3EFDEE1B6">“粒子形状”(particle shape)</span>节点和刚体）保存所有每粒子属性值。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F9B">当通过在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-BB854585-0EF6-4B06-B7C4-E0BA14C5BF38">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-72D6DEAE-C227-4F89-AA35-658D8CE20FD1">“添加动态属性”(Add Dynamic Attributes)</span>区域单击其中一个按钮来动态添加每粒子属性时，，Maya 还会添加一个名称以 0 结束的对应的初始状态属性。例如，如果在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-4F2A1DFB-B22C-408B-B0D6-C959DC9D35C7">“属性编辑器”(Attribute Editor)</span>中单击<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-A33A9F73-BD8F-459B-B931-5B33FDCFD83A">“不透明度”(Opacity)</span>按钮并添加每粒子不透明度属性，Maya 还会添加 opacityPP0。 </p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F9A">尽管初始状态属性未显示在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-51CE20CF-0A5F-41D1-84E5-4BE35FD1FC03">“表达式编辑器”(Expression Editor)</span>中，但可以读取其值（例如使用打印语句）来检索初始状态。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F99"> 在使用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-4F8BB0DD-D88E-4CEB-B233-263CF975CFAB">“添加属性”(Add Attribute)</span>窗口向<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-0578A5C2-2291-4121-9DA0-60258BD92D9C">“粒子形状”(particle shape)</span>中添加自定义<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-1DB6EDDF-1611-4A5E-B66E-7596086AC1FE">“每粒子(数组)”(per particle (array))</span>属性时，必须选择在添加时是否启用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-88734550-693D-4834-B5F5-D79CEB0735EF">“添加初始状态属性”(Add Initial State Attribute)</span>。如果选择启用，Maya 将为添加的属性创建相应的初始状态属性。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F96">如果选择禁用，Maya 不会为添加的属性创建相应的初始状态属性。如果没有该相应属性，则无法为初始状态使用保存粒子对象的当前属性值。如果您决定在回放动画时初始化自定义属性的值，则必须编写创建表达式。</p>
<div class="note note" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F95"><span class="notetitle">注：</span> 
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-73D01A8C-BE20-434B-B856-F7225AC99457">每粒子属性在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-A95568A2-CA18-4CFB-8D50-A11630984D84">“添加属性”(Add Attribute)</span>窗口中称为数组属性。这两个词的含义相同。详细信息请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-A8F23477-3689-4690-BEE3-5517025A7D11.htm">指定给自定义属性</a>。</p>

</div>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F94"> 使用 Maya <em class="ph i" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-BE352010-5260-4C3F-B6B9-7945A25C4786">listAttr</em> 命令可以确定添加自定义属性时是否启用了<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-8B930008-0598-4FEA-81CB-0817C005C09C">“添加初始状态属性”(Add Initial State Attribute)</span>。（详细信息请参见 MEL 命令参考。）</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F92">您可能要读取表达式中的初始状态属性的值，例如将其原始（回放）值用于某些计算。如果您为初始状态属性指定一个值，并为初始状态使用保存该属性值，Maya 会覆盖该值。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F91"> 在向<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-12FA36AC-225B-4250-9DEB-70C50C640711">“粒子形状”(particle shape)</span>中添加自定义属性时，请不要以字符 0 结束名称。您将推翻 Maya 用于与属性关联的初始状态属性的命名方案。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F8F">对于任何属性，如果不使用创建表达式初始化其值或为初始状态使用保存其值，Maya 将在动画的第一帧处为该属性提供默认值。它通常为属性指定值 0 或 &lt;&lt;0,0,0&gt;&gt;，取决于数据类型。在其他情况下（例如，opacityPP 和不透明度），Maya 将为该属性指定默认值 1。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F8E">如果您知道要为自定义属性编写创建表达式，则可在添加该属性时将<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-ACCB3944-2677-49B8-9674-E530EDB8E02D">“添加初始状态属性”(Add Initial State Attribute)</span>设定为禁用。否则，请在添加自定义属性时将<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-621D05E5-C8E1-4685-A316-CC6482DF919D">“添加初始状态属性”(Add Initial State Attribute)</span>设定为启用。 </p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F8D">当创建表达式为属性指定值时，对于年龄为 0 的所有粒子，该值会覆盖属性的初始状态值。</p>
<div class="section" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F8C"><h2 class="title sectiontitle">为动态每粒子属性赋值的示例</h2>

<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F8B"> 假设您使用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-30698CD4-7F73-4342-9F8B-8AD8FDAC9E5C">“粒子工具”(Particle tool)</span>围绕棋盘格锥创建少量红色粒子。该粒子对象命名为<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-D107835D-C344-40C7-9D07-157993B6A386">“Squares”</span>。它显示在点较大的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6E98CA78-B807-4D4E-927A-241C6C09EE31">“点”(Points)</span>渲染类型中，使粒子看上去像不透明的大方块。 </p>

<div class="fig fignone" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F89"><img class="image" width="235" height="224" src="../images/GUID-C80336F1-4DB4-40F8-8AF0-7590BEF175B2.png"></div>

<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F88">下列步骤显示如何为 opacityPP 指定值，以使每个粒子具有不同的随机不透明度。 </p>

<p class="li listintro" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F86">若要使用每粒子 opacityPP 属性，请执行下列操作：</p>
<ol class="ol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F87"><li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F85">在工作区中，启用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-BD11A632-97D3-4324-8D2A-83F6BC360CF5">“着色 &gt; 对所有项目进行平滑着色处理”(Shading &gt; Smooth Shade All)</span>。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F84">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-EA736C13-5646-442C-A7C4-09650D61993F">“大纲视图”(Outliner)</span>或<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-3E0B8C30-6D03-46A3-B8AD-13FC0CD35F62">“Hypergraph”</span>中选择<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-50A9D96C-4560-4ED5-807B-AE1ABFFBF0E4">“方形”(Squares)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-53309A0B-D7A0-4A4F-ABF5-FC379D2D41E5">“粒子形状”(particle shape)</span>节点。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F83">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-9A2926C8-D550-40DD-A8EA-9DEF51091365">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-07BED875-CF75-4DFD-A6AA-1E302597A4C0">“添加动态属性”(Add Dynamic Attributes)</span>区域，单击<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-E60E1F19-C66E-4C66-8F49-7B2B81B09C96">“不透明度”(Opacity)</span>按钮。 <p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F82">将出现一个窗口，提示您选择要添加每对象属性还是每粒子属性。</p>
</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F81">选择<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6337D46F-CACA-46AE-8523-0A8F44FCBA6A">“添加每粒子属性”(Add Per Particle Attribute)</span>，然后单击<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-37FE8D1B-91B0-481F-9E79-96B1F505BAA6">“添加属性”(Add Attribute)</span>按钮。<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F80">该操作将向<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-57C60D18-F78C-49ED-93AA-25CD0A5046A4">“方形”(Squares)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-07C42118-7807-4403-BEB8-CD091715C5D6">“粒子形状”(particle shape)</span>节点添加一个<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-D8357026-EABA-4B18-A173-8568C6E41916">“opacityPP”</span>属性。可以设定<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-0574E890-1BB0-4115-925F-7DE4BA06F759">“opacityPP”</span>的值，以为每个粒子提供不同的不透明度。 </p>
</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7F">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-F69882CA-824E-42CD-A0B3-281D1DFFBB32">“表达式编辑器”(Expression Editor)</span>中选择<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-4DB2ACCC-FFF7-43E2-ABFD-D923B48AF968">“方形”(Squares)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-64ED5983-0A39-4F70-A14D-95FCD61B43F5">“粒子形状”(particle shape)</span>节点。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7E">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6A714F18-461A-436C-A36A-1D4D97738A4A">“表达式编辑器”(Expression Editor)</span>中启用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-2E069A71-86BD-4D88-882A-88FAE1D10F74">“创建”(Creation)</span>。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7D">创建以下表达式：</li>
</ol>

<pre class="pre codeblock">
SquaresShape.opacityPP = rand(1);
print("Hello\n");
</pre>

<ol class="ol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7C"><li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7B">回放动画。<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F7A">由于<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-F41B3F5C-36E1-4017-B090-D32575FDFE01">“opacityPP”</span>是每粒子属性并且在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-EE8AFB6E-6253-405D-A850-CA2C51D853D6">“表达式编辑器”(Expression Editor)</span>中选择了对象的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-345A8376-115B-4FA7-8750-991BD88B3C3E">“粒子形状”(particle shape)</span>节点，因此，该表达式会对对象中的每个粒子执行一次两个语句的执行循环。 </p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F79">由于表达式为创建表达式，因此它在编译后执行。它还会在播放动画后回放时执行。 </p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F77">对于每个粒子，第一个语句为<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6C6EAD88-9B81-45C4-9522-4219F495F635">“opacityPP”</span>属性指定一个介于 0 和 1 之间的随机浮点数。随机函数每次执行时会返回不同的随机数，所以每个粒子具有介于 0 和 1 之间的不同<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-7860966F-8894-4DAD-A8DA-32BE44CA749E">“opacityPP”</span>值。因此，每个粒子在生成时都具有不同的不透明度。有关随机函数的详细信息，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-B00C3232-BF83-433B-9AED-E983E4FBD5CA.htm#GUID-B00C3232-BF83-433B-9AED-E983E4FBD5CA__WS17956D7ADBC6E736-B7DF06E117AE328567-8000">有用的函数</a>。第二个语句在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-EF2F0D9A-86E2-4439-BA01-6BA057B2DBF8">“脚本编辑器”(Script Editor)</span>中显示 <em class="ph i" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-958ED098-4314-4168-B5A0-D18E86104CA4">Hello</em>，对每个粒子显示一次。</p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F76">在播放动画时，创建表达式不执行。因此，粒子会保留在回放时接收的不透明度。</p>
<div class="fig fignone" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F75"><img class="image" width="440" height="297" src="../images/GUID-DBD7E503-29BD-4672-A6D7-CE4F6BBE400E.png"></div>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F74">每次播放然后回放动画时，每个粒子都会接收随机的新不透明度。每次回放时，创建表达式都会执行随机函数。 </p>
<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F73">如果要使用前面的表达式作为运行时表达式而非创建表达式，则每个粒子的不透明度会在动画播放时更改每个帧。在每一帧，运行时表达式将执行，为每个粒子的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-02F44816-1648-433A-BE83-750575651CFD">“opacityPP”</span>指定介于 0 和 1 之间的不同随机值。 </p>
</li>
</ol>

</div>
<div class="section" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F72"><h2 class="title sectiontitle">为动态每对象属性赋值的示例</h2>

<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F71"> 假设您使用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-7C4B955B-21FE-4495-91D6-25D359DE10FA">“粒子工具”(Particle tool)</span>创建了名为<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-D54B24C1-77DD-4A14-8B09-8F3B02452497">“Squares”</span>的新粒子对象，该对象与前一示例开头介绍的对象相似。以下步骤显示如何为<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-3AC5B4FA-2DAC-441D-A4FF-06E20666A777">“方形”(Squares)</span>中的所有粒子给定单个不透明度，该值可在五秒的动画时间内从透明变为不透明。 </p>

<p class="li listintro" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6E">若要使用每对象不透明度属性，请执行下列操作：</p>
<ol class="ol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6F"><li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6D">在工作区中，启用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-84F4BDB1-42E5-4ADA-BB62-39D37FE0E52D">“着色 &gt; 对所有项目进行平滑着色处理”(Shading &gt; Smooth Shade All)</span>。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6C">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-BF0FDB39-7C94-4CB6-9CF7-2A1EF3EA421E">“大纲视图”(Outliner)</span>或<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-A79310F0-D9B5-44CF-AC31-71F6ADC7FBC7">“Hypergraph”</span>中选择<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-FC341199-E0BB-46B0-9F9E-0CDA419FD931">“方形”(Squares)</span>对应的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-01482519-1F55-4464-8062-B3011105CCAC">“粒子形状”(particle shape)</span>节点。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6B">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-EE710588-E39C-4932-A54E-E4B90060BAE8">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-89660EB3-725D-4AFB-B135-27A9D17333DA">“添加动态属性”(Add Dynamic Attributes)</span>区域，单击<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6CC6BF69-6E6D-4275-90F0-30FB9E0E21A3">“不透明度”(Opacity)</span>按钮。 <p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F6A">将出现一个窗口，提示您选择要添加每对象属性还是每粒子属性。</p>
</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F69">选择<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-F2217431-1BC8-44DD-949A-E6742955D2A7">“添加每对象属性”(Add Per Object Attribute)</span>，然后单击<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-40FE1BDC-10A4-424F-9716-C7E1145639B1">“添加属性”(Add Attribute)</span>按钮。<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F68">该操作将向<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-A2114D35-C054-4232-B9D5-4594E859975E">“方形”(Squares)</span>的<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-4798E94C-941A-487D-B8F8-FC723CC5EEDD">“粒子形状”(particle shape)</span>节点添加不透明度属性。 </p>
</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F67">在<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-59062C7E-94C3-46D0-9A9A-45ED21B0E692">“表达式编辑器”(Expression Editor)</span>中，启用<span class="ph uicontrol" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__GUID-6F97AAFF-C754-4296-9900-AF6D46BD9E04">“运行时动力学前”或“运行时动力学后”(Runtime (before dynamics or after dynamics))</span>。</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F66">创建该运行时表达式：<pre class="pre codeblock">
SquaresShape.opacity = linstep(0,5,age);
</pre>
</li>
<li class="li" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F65">播放动画。<p class="p" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F64">运行时表达式在播放期间会执行每个帧。该表达式中的语句对于每个粒子执行一次，并根据 linstep 函数为不透明度属性指定介于 0 和 1 之间的一个相同值（详细信息请参见 <a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-4C59836B-1712-4022-9632-9FFE9C3DF0B1.htm">linstep</a>）。在对象存在的前 5 秒，该值会从 0 逐渐增加到 1。 </p>
<div class="fig fignone" id="GUID-375E6B07-A022-45FE-A757-D213B23A0227__WS73099CC142F48755-3D114B7511841AEFA9F-F63"><img class="image" width="197" height="222" src="../images/GUID-7C9900CF-29CB-40A7-802B-F28F05205CED.png"></div>
</li>
</ol>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-F7BE65C4-CDA4-42DC-A0D8-72B9D984B3E1.htm">关于粒子表达式</a></div>
</div>
</div>

</body>
</html>
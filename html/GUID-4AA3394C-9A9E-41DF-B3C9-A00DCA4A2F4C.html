<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Scripting">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C">
<meta name="language" content="CHS">
<title>使用碰撞</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>使用碰撞</h1></div>
</div>
</div>

<div class="body"><p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EDD"> 如果要使粒子对象与某个对象发生碰撞，可以编写表达式以在碰撞之后触发表达式语句。例如，可以更改碰撞粒子的颜色或不透明度。 </p>
<p class="li listintro" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EDB">若要准备编写表达式，请执行下列操作：</p>
<ol class="ol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS17956D7ADBC6E736-356F1BB9117AE32940D-7FF5"><li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EDA">在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-1B518710-9A3F-4E67-82A7-FA3198CD2C7F">“大纲视图”(Outliner)</span>或<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-BF2197F6-59C7-48B6-83F8-72BC9F88D3E5">“Hypergraph”</span>中选择粒子的<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-308965DC-669A-49FF-9626-2A4ABDFC9C04">“粒子形状”(particle shape)</span>节点。 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED9">选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-C5A36430-1C98-4D07-9118-49EB14ADEA25">“nParticle &gt; 粒子碰撞事件编辑器”(nParticles &gt; Particle Collision Event Editor)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED8">将显示<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-1A82F407-C025-4CA2-9D56-2D9713524CE0">“粒子碰撞事件”(Particle Collision Events)</span>窗口。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED6"> 单击<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-66E15595-B25C-4D93-AB34-134BC368320F">“创建事件”(Create Event)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED4">这会将事件属性添加到选定<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-344F49C6-1953-4E63-9BD8-AED4E8556420">“粒子形状”(particle shape)</span>节点。<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-67C09626-0D7A-4A4D-A4A1-18532A368410">“表达式编辑器”(Expression Editor)</span>会在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-F1933A88-7528-4BBA-9903-70851FF5FB97">“属性”(Attributes)</span>列表中显示添加的事件属性。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED2">关闭<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-7DB1013D-26C3-42E7-9239-136A4053718D">“粒子碰撞事件”(Particle Collision Events)</span>窗口。 </p>
 </li>
</ol>
<p class="li listintro" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED0">若要编写表达式，请执行下列操作：</p>
<ol class="ol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ED1"><li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECF">选择碰撞粒子的<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-F28EBA83-2D16-4C2C-99B1-B94146DE9425">“粒子形状”(particle shape)</span>节点。 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECE">使用碰撞粒子形状节点的这些任意属性的值编写运行时或创建表达式： 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECD" class="table" width="90%" frame="border" border="1" rules="all"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="25%">长名称 </th>
<th class="entry" valign="top" width="25%">短名称 </th>
<th class="entry" valign="top" width="25%">说明 </th>
<th class="entry" valign="top" width="25%">数据类型 </th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECC">事件 </p>

</td>
<td class="entry" valign="top" width="25%"> </td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECB">包含对象中的每个粒子已碰撞某物的次数（基于每粒子）。 </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-ECA">浮点数组 </p>

</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC9">eventCount </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC7">evc </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC6">对象的所有粒子发生的事件总数量。 </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC5">整数 </p>

</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC4">eventTest </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC2">evt </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC1">如果自上次表达式或 MEL <em class="ph i" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-25D7AD42-02B8-4E7E-9FC6-4B5CB18C7927">getAttr</em> 命令读取 eventTest 值后事件已出现，则为 True。 </p>

</td>
<td class="entry" valign="top" width="25%">
<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EC0">布尔 </p>

</td>
</tr>
</tbody>
</table>
</div>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EBF"><span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-63DA53DE-1241-4194-B407-496C249CCFF5">eventCount</span> 和 <span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-963D31ED-0904-4597-90F2-28E0DE0B5C21">eventTest</span> 是静态属性。在您创建粒子对象后，<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-BA31DBBB-6AA6-4CAB-8E72-9ABDD8EF2DFB">“粒子形状”(particle shape)</span>节点会立即包含它们。尽管它们不会出现在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-EB9EA0CB-51A4-45DD-A0CE-46188A6B40A8">“表达式编辑器”(Expression Editor)</span>中，但您可以在表达式中使用其值。必须首先按如上所述创建事件属性。 </p>
 </li>
</ol>
<div class="section" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EBE"><h2 class="title sectiontitle">示例</h2>

<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EBD"> 假定您已创建了一个名为<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-F9ACCBF1-5D82-4254-9BAC-9BA995EF9066">“Peas”</span>的五粒子对象，该对象在重力作用下降落并与平面发生碰撞。 </p>

<div class="fig fignone" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EBB"><img class="image" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__IMAGE_76349FE38A714161B1F90C17BE3F251E" width="257" height="178" src="../images/GUID-32011B90-13D1-40A1-8D23-EB03252D9A3E.png"></div>

<p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EBA">可以在第一个粒子撞击平面时使这些粒子变为红色。 </p>

<ol class="ol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB9"><li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB8">选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-0D85132F-B87F-484B-A46C-F5C1FF38141D">“着色 &gt; 对所有项目进行平滑着色处理”(Shading &gt; Smooth Shade All)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB7">为在以后使用表达式设置粒子颜色时显示正确的粒子颜色，需要此步骤。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB6">在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-C134CFE4-C32D-48B5-A5AE-58B86DA4DD8C">“大纲视图”(Outliner)</span>或<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-D6F6F9D4-9D77-4C04-9B94-A479999F5356">“Hypergraph”</span>中选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-2881686F-013C-4116-B652-8CC83DAF0D9D">“PeasShape”</span>。 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB5">从<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-DCE3B525-A177-48D7-8E47-2D28145F9845">“动力学”(Dynamics)</span>菜单栏中，选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-5A18CAF7-5C40-43C2-BE73-63E654E55C12">“nParticle &gt; 粒子碰撞事件编辑器”(nParticles &gt; Particle Collision Event Editor)</span>。 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB4">在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-F3B5D144-68CB-40FC-98F5-134B09D415E9">“粒子碰撞事件”(Particle Collision Events)</span>窗口中，单击<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-B69B165B-DD33-4212-8F4D-EEA3E17E3114">“创建事件”(Create Event)</span>，然后关闭此窗口。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB3">这会将一个事件属性添加到<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-FDD120B4-916F-4255-9FCA-6341B8C7FBFE">“PeasShape”</span>中。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB2">在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-A653A51F-077B-421D-9286-222D1A342CD9">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-D7D294C9-B6BF-4E75-8960-A3CDCCE12067">“添加动态属性”(Add Dynamic Attributes)</span>部分，单击<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-FEE07F9E-483B-4EEF-96A8-086C1CCC900B">“颜色”(Color)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB1">将显示<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-4DE3BA93-0CE4-45A3-9A48-835144365D02">“粒子颜色”(Particle Color)</span>窗口。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EB0">选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-B67175DF-F3D1-4F5E-B056-F256EDDC6BE5">“添加每粒子属性”(Add Per Particle Attribute)</span>，然后单击<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-76F82C24-68A9-4685-BE03-AD057AA02424">“添加属性”(Add Attribute)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAF">这会添加一个名为<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-4659ECFB-432C-4B3E-952B-25BC6536F75B">“rgbPP”</span>的每粒子属性。此属性控制每个粒子的红、绿和蓝颜色方案。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAE">粒子在您添加<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-B6E44B0C-35CB-4FFB-9BA3-7AF10B604288">“rgbPP”</span>属性后变为黑色。添加<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-1D593C81-FB5E-4E73-B5E8-7DF2EC6A8C77">“rgbPP”</span>属性会禁用粒子的默认颜色，并为其提供值 &lt;&lt;0,0,0&gt;&gt;。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAD">在<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-7CE98177-CFD5-46AC-8732-BE6D37BC09A4">“表达式编辑器”(Expression Editor)</span>中选择了<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-3B818A26-E70C-4D35-B81A-B1154FBC131E">“PeasShape”</span>后，创建此运行时表达式（在动力学计算之前或之后）： <pre class="pre codeblock">
if (event == 1)
	rgbPP = &lt;&lt;1,0,0&gt;&gt;;
else if (event == 2)
	rgbPP = &lt;&lt;0,1,0&gt;&gt;;
else if (event &gt;= 3)
	rgbPP = &lt;&lt;0,0,1&gt;&gt;;
else rgbPP = &lt;&lt;1,1,1&gt;&gt;;
</pre>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAC">回放动画。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAB">在回放时，粒子是黑色的。粒子具有默认的黑色 rgbPP 颜色，因为该对象不存在任何创建表达式。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EAA">播放动画。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA9">粒子朝向平面降落。运行时表达式在每个帧播放时执行。事件属性是每粒子属性。这并不明显，因为其名称的最后两个字符不是 PP。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA8">由于事件包含每个粒子的运行时碰撞计数，因此在第一次与平面发生碰撞前，事件为每个粒子包含 0。在第一次发生碰撞后，最终 Else 语句才会执行： </p>
 <pre class="pre codeblock">
else rgbPP = &lt;&lt;1,1,1&gt;&gt;;
</pre>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA7">因为事件不等于 1、2、3 或大于 3 的数字，所以该语句会执行。RGB 颜色方案中的向量 &lt;&lt;1,1,1&gt;&gt; 表示白色。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA6">当<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-38C8110B-4D0C-4415-BC22-8F746170BC88">“PeasShape”</span>的第一个粒子撞击平面时，Maya 将该粒子的事件属性设置为 1。这将触发执行第一个指定，以将碰撞粒子的 rgbPP 值设置为 &lt;&lt;1,0,0&gt;&gt;。在 RGB 颜色方案中，该向量值表示红色。（当红色等于 1，绿色等于 0，蓝色等于 0 时，结果颜色为红色）。 </p>
 <div class="fig fignone" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA5"><img class="image" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__IMAGE_BF982323DA144B86AAE4A8ED06D932F8" width="303" height="206" src="../images/GUID-D17DBC00-3576-46B3-9098-D304E02D03ED.png"></div>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA4">该事件属性的值反映每次碰撞后帧中的碰撞计数。例如，如果粒子在第 10 帧与平面发生碰撞，则事件会在第 11 帧中更新。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA2">当其他粒子首次撞击平面时，它们也会在碰撞后变为红色。 </p>
 <div class="fig fignone" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA1"><img class="image" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__IMAGE_104CBF4AE46D428D9BE99AA34066B5FA" width="186" height="131" src="../images/GUID-FBB51F0F-A1D5-46D5-896D-9A57917585C2.png"></div>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-EA0">当事件等于 2 时，粒子在与平面发生第二次碰撞前保持红色。在第二次碰撞后，粒子会变为绿色。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9F">在第三次碰撞后，当事件等于或大于 3 时，粒子变为蓝色。在动画播放时，每个粒子在所有后续碰撞中保持蓝色。 </p>
 <div class="fig fignone" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9E"><img class="image" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__IMAGE_14DF9A869C804ED0997E4951B7904C68" width="161" height="137" src="../images/GUID-FEF46F90-AEB3-42B2-9BB8-EB698237ADB4.png"></div>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9D">回放动画。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9C">粒子会再次变为黑色，因为它们收到默认的<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-48717D1C-40ED-41EF-B053-550823FA7E8E">“rgbPP”</span>值 &lt;&lt;0,0,0&gt;&gt;。再次播放动画时，与以前一样，这些粒子以相同顺序变为白色、红色、绿色和蓝色。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9B">通过为粒子指定除黑色之外的颜色，可以优化在回放时显示的帧的动画。例如，可以使用以下两种方法在回放时为粒子指定白色： </p>
 </li>
</ol>

<ul class="ul" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E9A"><li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E99">为<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-E0A4D1CD-DD90-46A1-9EDF-5A6A9CCBC360">“PeasShape”</span>编写该创建规则： <pre class="pre codeblock">
rgbPP = &lt;&lt;1,1,1&gt;&gt;;
</pre>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E98">该语句会针对对象中的每个粒子执行，以便在您回放场景时它们均会收到相同的白色。 </p>
 </li>
<li class="li" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E97">选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-C9AC6E70-1598-4DBD-A0AC-56FD2E1B5C6E">“PeasShape”</span>，回放动画，再将动画播放到第 2 帧。然后选择<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-59C33DF5-C80D-4CCC-8267-EF593A4C5D3A">“解算器 &gt; 初始状态 &gt; 为选定对象设置”(Solvers &gt; Initial State &gt; Set for Selected)</span>。 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E96">这会从当前帧为属性的初始状态保存所有<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-D562FFBA-971C-4D15-9C98-159D86C0083F">“PeasShape”</span>属性值。在回放动画时将使用<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-6AECFC87-539E-4DE1-A689-265938F997D3">“rgbPP”</span>的当前值。因为您播放的是动画的第二帧，所以这会在该帧保存粒子的白色以在回放动画时使用。 </p>
 <p class="p" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__WS73099CC142F48755-3D114B7511841AEFA9F-E95">“为<span class="ph uicontrol" id="GUID-4AA3394C-9A9E-41DF-B3C9-A00DCA4A2F4C__GUID-26E0AF6E-EBBB-454B-B214-94F73F77BAD5">“选定”(Selected)</span>对象设置”会保存所有属性值，包括位置、速度、加速度等。如果您在播放期间有多个更改属性值，“为选定对象设置”可能会保存不需要的属性值以及所需的属性值。在此类情况下，请使用创建表达式。 </p>
 </li>
</ul>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-F7BE65C4-CDA4-42DC-A0D8-72B9D984B3E1.htm">关于粒子表达式</a></div>
</div>
</div>

</body>
</html>
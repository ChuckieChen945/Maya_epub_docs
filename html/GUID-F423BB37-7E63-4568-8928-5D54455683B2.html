<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-SimulationEffects">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-F423BB37-7E63-4568-8928-5D54455683B2">
<meta name="language" content="CHS">
<title>为碰撞事件创建 MEL 程序</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-F423BB37-7E63-4568-8928-5D54455683B2">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>为碰撞事件创建 MEL 程序 </h1></div>
</div>
</div>

<div class="body" id="WS73099CC142F48755-2231E4B3128F27EE529-32F6"><p class="p" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ECD"> 若要对碰撞事件使用事件程序，包含程序的 MEL 脚本必须具有以下格式和参数列表： 
	 </p>
<pre class="pre codeblock">
global proc <pre class="pre codeblock">
<em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-5EFE8F79-5D48-4435-8581-FE190B818FD9">myEventProc</em></pre>
 (string 
	 <pre class="pre codeblock">
<em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-D4ED97B4-6260-40C9-9377-0E86E8C22A22">$particleObject</em></pre>
, int 
	 <pre class="pre codeblock">
<em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-7B155B77-CBAD-45D7-95DF-32E9EB285549">$particleId</em></pre>
, string 
	 <pre class="pre codeblock">
<em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-7C9D93AB-68F6-40F2-A394-204CE959820F">$geometryObject</em></pre>
) { 
	 <pre class="pre codeblock">
<em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-7670C3E7-5EDB-467B-88D3-B618035DCEC4">Type MEL statements here;</em></pre>
} 
  </pre>
<p class="p" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3088">其中， 
  </p>
<ul class="ul" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ECF"><li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED0"> 
		<samp class="ph codeph" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-870F2178-5472-46E7-AA41-180188F844B2">myEventProc</samp> 是 MEL 程序和脚本的名称。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED1"> 
		<samp class="ph codeph" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-A2FF6738-653B-4AF2-9D16-680D860DAC3B">$particleObject</samp> 是与几何体碰撞的粒子对象的名称。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED2"> 
		<samp class="ph codeph" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-A20F66E7-8B09-472F-954C-E5D1A3E12400">$particleId</samp> 是碰撞的粒子的粒子 ID。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED3"> 
		<samp class="ph codeph" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-10FA0F39-0787-4DF5-9683-05FEFC9585A3">$geometryObject</samp> 是几何体的名称。 
	 </li>
</ul>
<p class="p" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3084">创建事件程序时，请注意下列几点： 
  </p>
<ul class="ul" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3083"><li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3082">不需要在程序中使用参数的内容，但是它们必须存在于程序定义中。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3081">使 MEL 文件与程序具有相同的名称，以便源化脚本时将程序加载到内存中。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-3080">若要每次启动 <span class="ph msgph prodname" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-22C1D86C-C8BF-45A2-B855-12E962BDC891">Maya</span> 都源化脚本及其程序，请将 MEL 脚本放在 Maya 项目的 <em class="ph i" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-609987A5-DECA-4A28-85E1-0D58A5AE8EB9">scripts</em> 文件夹中。例如，<samp class="ph codeph" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-AFF30514-AC23-49C7-9B2C-016BDBB4C3BA"><span class="ph msgph prodname" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-22C1D86C-C8BF-45A2-B855-12E962BDC891">Maya</span>\&lt;版本&gt;\scripts\</samp>。 
	 </li>
</ul>
<p class="li listintro" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED4">将脚本程序添加到粒子碰撞事件中</p>
<ol class="ol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-307B"><li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED5">通过选择<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-8DC885AA-6C09-4A3A-ABDC-C055AB6AF745">“窗口 &gt; 常规编辑器 &gt; 脚本编辑器”(Windows &gt; General Editor &gt; Script Editor)</span>打开<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-978ACC04-3704-435A-BC09-0EAFBD34B0CF">“脚本编辑器”(Script editor)</span>。 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS1A9193826455F5FF-6D855556117FACF922E-307A">在<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-8DE3E483-DB0F-4B83-B4D1-534697CFCA20">“脚本编辑器”(Script Editor)</span>中，选择<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-DD0490EE-B28A-427D-9B39-CF16EF9D6F11">“文件 &gt; 源化脚本”(File &gt; Source Script)</span>以源化包含程序的脚本。 
		<div class="note note" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-FD8AF8D1204C8F5D90-6D26"><span class="notetitle">注：</span>  
		  <p class="p" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-4B7E0B52-40CD-4482-B30C-26ED12DF640B">如果程序创建对象，则回放模拟时 <span class="ph msgph prodname" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-22C1D86C-C8BF-45A2-B855-12E962BDC891">Maya</span> 不会删除它们。还可以源化程序，而不源化包含程序的脚本。有关使用脚本和程序的更多详细信息，请参见 <a class="xref" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=MAYAUL&amp;l=CHS&amp;accessmode=live&amp;guid=GUID-E151A15C-BA1D-4E60-8DB6-9D92C6202170">MEL 和表达式</a>部分。 
		  </p>
 
		</div>
 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0ED6"> 在 <span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-09A12979-675E-45B1-9EC1-61C13A02D637">FX</span> 菜单集中，选择<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-46D93455-2B18-48C7-BC12-A9A840C4CEFE">“nParticle &gt; 粒子碰撞事件编辑器”(nParticles &gt; Particle Collision Event Editor)</span>。 
		<p class="p" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDA">将出现<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-89CAC450-5766-48C7-BB24-34A01882842B">“粒子碰撞事件编辑器”(Particle Collision Event Editor)</span>。 
		</p>
 
	 </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDB">在<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-EF3AD3F5-F08B-4359-858A-7E762432F347">“粒子碰撞事件编辑器”(Particle Collision Event Editor)</span>中，执行下列操作： 
		<ul class="ul" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDC"><li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDD">单击<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-6E99C576-A509-4931-AF47-6D880B87C752">“创建事件”(Create Event)</span>。 
		  </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDE">（可选）如果您希望源粒子对象在碰撞后消亡，请启用<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-E1637CF5-34A9-49DA-A18A-ECE5818790FD">“原始粒子消亡”(Original Particles Die)</span>。 
		  </li>
<li class="li" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__WS73099CC142F48755-5C83E7B1120018DE8C0EDF">在<span class="ph uicontrol" id="GUID-F423BB37-7E63-4568-8928-5D54455683B2__GUID-3D9F935E-B8DE-4D29-85B2-990211158A10">“事件程序”(Event procedure)</span>字段中键入事件程序的名称。 
		  </li>
</ul>
 
	 </li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-SimulationEffects/files/GUID-355BF326-DF25-41F1-A572-7C417019BBFE.htm">处理 nParticle 碰撞事件</a></div>
</div>
</div>

</body>
</html>
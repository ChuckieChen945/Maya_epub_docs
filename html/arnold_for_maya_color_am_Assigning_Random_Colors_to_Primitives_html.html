<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <link rel="stylesheet" href="../style/client.css" type="text/css">

  <meta name="experiencelevel" content="general">
  <meta name="audience" content="user">
  <meta name="language" content="CHS">
  <meta name="product" content="MAYAUL">
  <meta name="release" content="2025">
  <meta name="book" content="GeneralUser">
  <meta name="component" content="AR-Maya">
  <meta name="topicid" content="arnold_for_maya_color_am_Assigning_Random_Colors_to_Primitives_html">
  
  <meta name="generatedby" content="CLC">
  <meta name="topic-type" content="reference">
  <meta name="contextid" content="AM_ASSIGNING_RANDOM_COLORS_TO_PRIMITIVES">
  <meta name="keyword" content="关键字占位符">

  <script src="../scripts/client.js" type="text/javascript"><!--filler--></script>
  <meta name="alt-title" content=" 为基本体指定随机颜色 - Arnold for Maya">

<title>为基本体指定随机颜色</title>

</head>
<body>
  <a name="top"></a>
  <link rel="stylesheet" type="text/css" href="../style/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../style/additions.css">
  <link rel="stylesheet" type="text/css" href="../style/font-awesome.min.css">

  <div class="body_content" id="body-content">
  <link rel="stylesheet" type="text/css" href="../style/arnold.css">





<div class="head-block"><h1>为基本体指定随机颜色</h1></div><p><img src="../images/am-Assigning_Random_Colors_to_Primitives-pill-master-1.jpg" alt=""></p>
<p>在本教程中，我们将介绍如何结合使用表达式和<a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Assigning_Color/arnold_for_maya_color_am_Assigning_Random_Colors_to_Primitives_html.html">用户数据</a>节点为不同 XGen 基本体指定随机颜色。</p>

<div class="callout callout-note">
<div class="callout-title"><i class="callout-icon fa fa-pencil" aria-hidden="true"></i>注意：</div>
<div class="callout-body">

<p>在开始学习本教程前，建议您另外阅读<a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Assigning_Color/arnold_for_maya_color_am_Assigning_Random_Colors_to_Primitives_html.html">使用纹理贴图控制基本体</a>教程，其中介绍了如何定义 XGen 基本体的比例。</p>

</div></div>

<h2 id="">场景设置</h2><ul>
<li>首先，您需要将模型导出为 XGen 归档。</li>
<li>创建 XGen 归档描述并添加归档文件。为归档集合指定一个<a href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?p=MAYAUL&amp;l=CHS&amp;accessmode=live&amp;v=2025&amp;guid=arnold_for_maya_surface_am_Standard_Surface_html">标准曲面</a>着色器。</li>
<li>创建一个<strong><em><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Assigning_Color/arnold_for_maya_color_am_Assigning_Random_Colors_to_Primitives_html.html">用户数据</a></em></strong>节点，并将它连接到标准曲面着色器的<strong>“颜色”(Color)</strong>属性。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-10-16-51-2.png" alt=""></p>
<p><sup><sub><strong>Ai 用户数据颜色节点连接到标准曲面着色器的“颜色”(Color)属性</strong></sub></sup></p>
<ul>
<li>在 Ai 用户数据颜色节点的<strong>“颜色属性名称”(Color Attr Name)</strong>中键入 <strong><em>color</em></strong>。我们将在 XGen 描述中使用相同的<strong>“Color”</strong>名称。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-10-50-12-3.png" alt=""></p>
<p><sub><strong>将名称“color”添加到 Ai 用户数据颜色节点中的“颜色属性名称”(Color Attr Name)</strong></sub></p>
<ul>
<li>MtoA 不会对 Ai 用户数据颜色节点进行 Gamma 校正。因此，您需要在 <strong>Ai 用户数据颜色</strong> 节点与标准曲面着色器的<strong>“颜色”(Color)</strong> <strong>属性</strong> 之间添加一个 <strong>*Maya</strong> <strong>Gamma 校正*</strong>节点，如下所示。将“Gamma RGB”的值更改为 0.454。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-0-29-4.png" alt=""></p>
<ul>
<li>渲染场景。这些药丸是黑色的，因为 <strong>Ai 用户数据颜色</strong>的<strong><em>“默认值”(Default Value)</em></strong>为黑色。我们需要使用 XGen 中的<strong>“自定义着色器参数”(Custom Shader Parameters)</strong>将其连接到 XGen 描述。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-black-5.jpg" alt=""></p>
<p><sub><strong>药丸归档使用 Ai 用户数据颜色节点的默认颜色（黑色）</strong></sub></p>
<ul>
<li>将<strong>“密度”(Density)</strong>增加到 20 左右，以增加 XGen 基本体归档药丸模型的数量。</li>
</ul>
<h2 id="custom-shader-parameters">自定义着色器参数(Custom Shader Parameters)</h2><ul>
<li>单击 XGen 中的<strong>“预览/输出”(Priview/Output)</strong>选项卡，并打开<strong><em>“输出设置”(Output Settings)</em></strong>。您应该会在下方看到<strong>“自定义着色器参数”(Custom Shader Parameters)</strong>。我们将在这里添加表达式。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-4-25-6.png" alt=""></p>
<p><sub><strong>自定义着色器参数(Custom Shader Parameters)（底部）</strong></sub></p>
<ul>
<li>在<strong>“名称”(Name)</strong>文本字段中，键入用于 <strong>Ai 用户数据颜色</strong>节点的<strong><em>“颜色属性名称”(Color Attr Name)</em></strong>的相同名称。在本例中，我们使用单词<strong>“Color”</strong>。将<strong>“浮点”(float)</strong>更改为<strong><em>“颜色”(Color)</em></strong>，因为这是我们想要更改的属性。</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-5-45-7.png" alt=""></p>
<p><sub><strong>“自定义着色器参数”(Custom Shader Parameters)设置为“颜色”(Color)</strong></sub></p>
<h2 id="">表达式</h2><ul>
<li>单击新的<strong><em>“color color”</em></strong>参数右侧的<strong>“XGen 表达式编辑器”(XGen Expression Editor)图标</strong> <img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-6-4-8.png" alt="">，然后在<strong>“XGen 表达式编辑器”(XGen Expression Editor)</strong>中添加以下文本：</li>
</ul>
<pre class="pre codeblock"><code class="prettyprint"> $a=[rand(0,1,$id),rand(0,1,$id+1),rand(0,1,$id+2)];#-1.0,1.0 </code></pre><pre class="pre codeblock"><code class="prettyprint"> $a </code></pre><p>其中，<strong>rand</strong> 将 RGB 值定义为介于 0 和 1 之间。</p>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-6-31-9.png" alt=""></p>
<p><sub><strong>“XGen 表达式编辑器”(XGen Expression Editor)中用于将 RGB 值定义为从 0 到 1 的表达式</strong></sub></p>
<ul>
<li>渲染场景。得到的结果应类似下图：</li>
</ul>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-1-10.jpg" alt=""></p>
<ul>
<li>如果将 <strong>rand</strong> 更改为以下值：</li>
</ul>
<pre class="pre codeblock"><code class="prettyprint"> $a=[1,rand(0,0.5,$id+1),rand(0,0.5,$id+2)];#-1.0,1.0 </code></pre><pre class="pre codeblock"><code class="prettyprint"> $a </code></pre><p>得到的结果中虽然包含 RGB 值，但是红色较多，绿色和蓝色较少。</p>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-2-11.jpg" alt=""></p>
<ul>
<li>如果将 <strong>rand</strong> 更改为以下值：</li>
</ul>
<pre class="pre codeblock"><code class="prettyprint"> $a=[rand(0.5,1,$id),rand(0,0.8,$id+1),rand(0,0.8,$id+2)];#-1.0,1.0 </code></pre><pre class="pre codeblock"><code class="prettyprint"> $a </code></pre><p>药丸具有更多的颜色变化，因为红色值介于 0.5 和 1 之间。</p>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-3-12.jpg" alt=""></p>
<h2 id="">滑块</h2><ul>
<li>我们可以创建一些滑块，以便更轻松地调整 RGB 颜色，而不必在“XGen 表达式编辑器”(XGen Expression Editor)中键入值。在“XGen 表达式编辑器”(XGen Expression Editor)中添加以下文本。</li>
</ul>
<pre class="pre codeblock"><code class="prettyprint"> $minRed = 0.000; </code></pre><pre class="pre codeblock"><code class="prettyprint"> $maxBlueGreen = 1.000; </code></pre><pre class="pre codeblock"><code class="prettyprint"> $a=[rand( $minRed,1,$id),rand(0,$maxBlueGreen,$id+1),rand(0,$maxBlueGreen,$id+2)];#-1.0,1.0 </code></pre><pre class="pre codeblock"><code class="prettyprint"> $a  </code></pre><p>您应该会看到出现两个滑块。它们可用于以交互方式预览生成的颜色。这样，我们就不必在每次进行更改后测试渲染场景！</p>
<p><img src="../images/am-Assigning_Random_Colors_to_Primitives-image2016-5-11-11-7-45-13.png" alt=""></p>
<p><sub><strong>具有特殊<strong>新</strong>滑块的“XGen 表达式编辑器”(XGen Expression Editor)</strong></sub></p>
<p>本教程到此结束。尽情享受 XGen 表达式带来的乐趣吧！</p>
<p><sub><sup><em>感谢 <strong><a class="external-link" href="http://www.pedrofe.com/" rel="nofollow" target="_blank">Pedro Fernando Gómez</a></strong> 在 XGen 方面提供的帮助。</em></sup></sub></p>

  <div class="related-links">
  
    <div class="familylinks">
      <div class="parentLink">
        <strong>父页面:</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/arnold_for_maya_xgen_am_Assigning_Color_html.html">指定颜色</a>
      </div>
  
    </div>
  
    </div></div>

    

</body>
</html>
<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <link rel="stylesheet" href="../style/client.css" type="text/css">

  <meta name="experiencelevel" content="general">
  <meta name="audience" content="user">
  <meta name="language" content="CHS">
  <meta name="product" content="MAYAUL">
  <meta name="release" content="2025">
  <meta name="book" content="GeneralUser">
  <meta name="component" content="Bifrost-Common">
  <meta name="topicid" content="Bifrost_Common_reference_Simulation_MPM_Simulation_MPM_mpm_solver_settings_html">
  
  <meta name="generatedby" content="CLC">

  <script src="../scripts/client.js" type="text/javascript"><!--filler--></script>

<title>mpm_solver_settings</title>

</head>
<body>
  <a name="top"></a>
  <link rel="stylesheet" type="text/css" href="../style/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../style/additions.css">
  <link rel="stylesheet" type="text/css" href="../style/font-awesome.min.css">

  <div class="body_content" id="body-content">
  <div class="head-block"><h1><code>mpm_solver_settings</code></h1></div><p>此复合的 <code>settings</code> 输出应连接到 <code>simulate_mpm</code> 的 <code>settings</code> 输入。</p>
<h2 id="general"><code>General</code></h2><h3 id="enable_solver"><code>enable_solver</code></h3><p>是否应运行模拟。不需要时，可使用此项关闭所有模拟。</p>
<h3 id="use_master_start_frame"><code>use_master_start_frame</code></h3><p><code>master_start_frame</code> 将用于覆盖 <code>simulate_mpm</code> 的 <code>colliders</code> 和 <code>sources</code> 的 <code>start_frame</code> 特性。在所有对象都应同时开始的简单情形下，可使用此项更加轻松地更改模拟开始时间。</p>
<h3 id="master_start_frame"><code>master_start_frame</code></h3><p>选中 <code>use_master_start_frame</code> 选项时要使用的帧。此帧将覆盖 <code>colliders</code> 的 <code>start_frame</code> 和 <code>simulate_mpm</code> 的 <code>sources</code> 特性。</p>
<h3 id="label_point_id"><code>label_point_id</code></h3><p>是否将额外的数字特性 <code>point_id</code> 存储在 <code>granular_points</code> 输出中，用于在模拟过程中唯一标识每个点，即使某些点被删除也是如此。在模拟过程中，粒子的顺序可以更改以提高性能。当顺序更改时，可以使用 <code>point_id</code> 来标识粒子。</p>
<h3 id="label_sources"><code>label_sources</code></h3><p>是否将额外的数字特性 <code>point_source_id</code> 存储在 <code>granular_points</code> 输出中，用于标识从哪个源几何体播种点。</p>
<h2 id="mpm-solver-globals"><code>MPM Solver Globals</code></h2><h3 id="detail_size"><code>detail_size</code></h3><p>要用于 <code>simulate_mpm</code> 中的 <code>volume</code> 的体素大小，以米为单位。值越小，模拟越精确，但代价是运行时间越长，且内存使用量越高。此值应始终大于 0。模拟中的粒子将具有根据 <code>detail_size</code> 缩放的影响区域，因此，<code>detail_size</code> 越小，粒子大小越小。</p>
<h3 id="detect_discontinuity"><code>detect_discontinuity</code></h3><p>在材质中的小间隙或裂缝附近复制体素，以实现不连续的运动。对于包含自相交的网格，此设置会增加不稳定性。</p>
<h3 id="link_collider_detail"><code>link_collider_detail</code></h3><p>忽略为碰撞对象设置的细节大小，并改用上面设置的解算器细节大小。如果与布料的细节大小相比，碰撞对象的细节大小非常粗糙，请使用此选项以避免在布料模拟中出现问题。如果此选项和 <code>use_mesh_resolution</code> 都处于启用状态，则还会从输入布料网格计算碰撞对象的细节大小。</p>
<h3 id="use_mesh_resolution"><code>use_mesh_resolution</code></h3><p>忽略全局细节大小。相反，布料的细节大小是根据输入网格计算的。</p>
<h3 id="detail_size_scale"><code>detail_size_scale</code></h3><p>启用 <code>use_mesh_resolution</code> 时，对细节大小进行额外控制的缩放因子。值介于 0 和 1 之间时会提高分辨率，值大于 1 时会降低分辨率。</p>
<h3 id="enable_gravity"><code>enable_gravity</code></h3><p>下面的 <code>gravity</code> 向量是否应该应用于模拟。</p>
<h3 id="gravity"><code>gravity</code></h3><p>模拟的 <code>gravity</code> 向量，以米/平方秒为单位。粒子沿重力方向受力。</p>
<h3 id="scene_units_in_meters"><code>scene_units_in_meters</code></h3><p>场景单位的大小（以米为单位）。此项可以补偿场景中几何体（源、碰撞对象等）建模的比例。这一点很重要，因为许多流体现象在采用不同的比例时看上去差异很大。例如，如果场景中的所有几何体都按 10 倍缩放（相对于其真实物理大小），要按正确比例进行模拟，应将 <code>scene_units_in_meters</code> 设置为 0.1。</p>
<h3 id="simulation_speed"><code>simulation_speed</code></h3><p>应用于模拟的感知视觉速度的比例。值大于 1 时会加快模拟速度，值小于 1 时会降低模拟速度。</p>
<h3 id="style"><code>style</code></h3><p>更改 <code>simulate_mpm</code> 使用的方法以更好地实现某种外观。</p>
<ul>
<li><code>automatic_from_sources</code>：根据 <code>sources</code> 的物理材质在 <code>smooth</code> 和 <code>chunky</code> 之间进行选择。如果场景中的所有材质都是雪，则将使用 <code>chunky</code> 方法，否则将使用 <code>smooth</code> 方法。</li>
<li><code>smooth</code>：生成更平滑的运动，此时闭合粒子将具有类似速度。此项使用 MLS APIC 方法。 </li>
<li><code>chunky</code>：生成变化更大的速度，从而产生更清晰的裂缝和更粗糙的整体外观。此项使用 FLIP 方法。<code>point_velocity</code> 特性不适合运动模糊，因为它与点的运动不匹配，因此为此用例添加了 <code>point_render_velocity</code> 特性。</li>
</ul>
<h3 id="time_step_size"><code>time_step_size</code></h3><p>默认时间步的缩放因子，由 <code>simulate_mpm</code> 复合根据各种标准进行确定。<code>time_step_size</code> 越大，总体模拟速度越快。如果该值过大，模拟将会出现稳定性问题，例如粒子移动过快。</p>
<h3 id="min_steps"><code>min_steps</code></h3><p>每帧最小时间步数。</p>
<h3 id="max_steps"><code>max_steps</code></h3><p>每帧最大时间步数。</p>
<h2 id="point-display"><code>Point Display</code></h2><h3 id="shape"><code>shape</code></h3><p>设置输出 <code>granular_points</code> 的显示形状。有关选项的更多详细信息，请参见 <code>set_point_shape</code>。</p>
<h3 id="face_camera"><code>face_camera</code></h3><p>输出 <code>granular_points</code> 显示几何体是否应朝向摄影机。有关更多详细信息，请参见 <code>set_point_shape</code>。</p>
<h3 id="numeric_property"><code>numeric_property</code></h3><p><code>shape</code> 设置为 <code>Numeric</code> 时，输出 <code>granular_points</code> 中显示的点特性。有关更多详细信息，请参见 <code>set_point_shape</code>。</p>
<h2 id="advanced"><code>Advanced</code></h2><h3 id="max_voxel_movement"><code>max_voxel_movement</code></h3><p>粒子可以移动的最大体素距离（以体素为单位）（请参见 <code>detail_size</code>），超过此距离后，模拟将被视为不稳定，并将使用较小时间步重试帧。如果模拟反复达到 <code>max_voxel_movement</code>，请考虑更改 <code>time_step_size</code>，这样不必重试，可以节省时间。</p>
<h3 id="max_retries"><code>max_retries</code></h3><p>对于在一个时间步中移动长度超过 <code>maximum_voxel_movement</code> 的粒子，解算器重试帧的最大次数。</p>
<h3 id="lag_colliders"><code>lag_colliders</code></h3><p>是否使输入 <code>colliders</code> 滞后一帧。如果滞后，将在此帧中使用上一帧中的几何体碰撞模拟。此选项允许 <code>simulate_mpm</code> 查看碰撞对象会发生什么情况，并防止出现过冲情况，即立即停止的快速移动碰撞对象经过相应帧中的指定终点位置然后返回。此外，如果几何体具有精确的 <code>point_velocity</code>，则不需要使用此选项，即可防止出现过冲情况。</p>
<h3 id="collide_particles"><code>collide_particles</code></h3><p>是否对粒子执行碰撞。碰撞仍将在不太精确的体积上执行。碰撞对象中厚度小于三个 <code>detail_size</code> 体素的部分可能会被部分忽略，因为粒子速度是从其所在的 3x3x3 体素立方体插值的。禁用时，碰撞对象 <code>bounciness</code> 和 <code>roughness</code> 没有任何效果。禁用此选项可提高性能，因为会跳过整个碰撞阶段。</p>
<h2 id="diagnostic-settings"><code>Diagnostic Settings</code></h2><h3 id="display_volume"><code>display_volume</code></h3><p>是否显示模拟中使用的质量密度体积。</p>
<h3 id="density_display_multiplier"><code>density_display_multiplier</code></h3><p>显示密度的倍增。可用于增加密度以查看薄对象（例如布料和纤维），否则会因为密度太低而无法看到。</p>
<h3 id="tile_tree_level"><code>tile_tree_level</code></h3><p>为启用的诊断体积启用多分辨率体积层次的可视化。此时将显示最深的 n 级 (<code>visible_levels</code>)。这些可视化由框和 <code>strands</code> 轮廓组成。它们与消隐和颜色协同工作。 </p>
<p>更高分辨率的平铺使用 <code>high_color</code>（默认为红色）进行绘制。然后，中等分辨率的平铺变为 <code>mid_color</code>（默认为绿色），低分辨率的平铺变为 <code>low_color</code>（默认为蓝色）。请记住，您看到的框是平铺而不是体素。在每个平铺中，都有一个大约 5x5x5 实际体素的迷你栅格，具体取决于体积设置。 </p>
<h3 id="diagnostic_point_shape"><code>diagnostic_point_shape</code></h3><p>诊断点的形状。</p>
<h3 id="draw_fraction"><code>draw_fraction</code></h3><p>诊断将随机采样此比例的点进行显示。</p>
<h3 id="seed"><code>seed</code></h3><p>用于随机采样的 <code>seed</code>。</p>
<h3 id="coloring_mode"><code>coloring_mode</code></h3><ul>
<li>“Color”- 此模式使用源类型的默认颜色。</li>
<li>“ColoredProperty”- 此模式通过将 <code>sample_property</code> 与默认颜色相乘来为点着色。如果 <code>sample_property</code> 是标量，则此选项将成为 <code>Color</code> 的均匀缩放。负值不会被钳制或修改。如果 <code>sample_property</code> 是向量，则执行与默认颜色的逐分量相乘；例如，x 分量缩放为红色，y 分量缩放为蓝色，依此类推。</li>
<li>“ColoredPropertyInvertNeg”- 此模式与“ColoredProperty”相同，但注意以下事项：如果 <code>sample_property</code> 是负的标量值，则生成的颜色将是按 <code>sample_property</code> 的绝对值缩放 1-<code>Color</code> 的结果。另请注意，向量值特性将通过采用其幅值转化为标量。</li>
<li>“ColoredPropertyMagnitude”- 此选项采用 <code>sample_property</code> 的幅值，通过 <code>magnitude_fcurve</code> 映射此幅值，然后使用此幅值缩放默认颜色。如果 <code>sample_property</code> 已经是标量，则使用绝对值。</li>
<li>“Property”- 此模式通过将 <code>sample_property</code> 的内容直接映射到 RGB 来为点着色。如果 <code>sample_property</code> 不是向量，则执行灰度映射。</li>
<li>“NormalVector”- 此模式使用映射到 RGB 的数据，但向量已归一化并重映射到 0-1 范围。</li>
<li>“Heatmap”- 此模式采用 <code>sample_property</code> 的幅值，并使用三条 fcurve 将结果映射到 R、G 和 B。</li>
<li>“Palette”- 此模式设计用于整数和 bool 特性。它使用 <code>sample_property</code> 映射到固定的调色板中。</li>
</ul>
<h3 id="sample_property"><code>sample_property</code></h3><p>用于为诊断点着色的特性。有关详细信息，请参见 <code>coloring_mode</code>。</p>
<h3 id="magnitude_fcurve"><code>magnitude_fcurve</code></h3><p>如果 <code>coloring_mode</code> 设置为“ColoredPropertyMagnitude”，则使用此 fcurve 映射幅值，然后缩放默认颜色。</p>
<h3 id="show_velocities"><code>show_velocities</code></h3><p>是否绘制速度箭头。</p>
<h3 id="arrow_scale"><code>arrow_scale</code></h3><p>缩放以应用于速度箭头。</p>
<h3 id="diagnostic_bounds"><code>diagnostic_bounds</code></h3><p>诊断将局限于此几何体的边界框中。</p>
<h3 id="additional_settings"><code>additional_settings</code></h3><p>用户可以将包含其他设置特性的对象连接到此项。</p>
<h3 id="simulation_bounds"><code>simulation_bounds</code></h3><p>将模拟约束在所连接几何体（如果有）的世界空间边界框中。</p>

  <div class="related-links">
  
    <div class="familylinks">
      <div class="parentLink">
        <strong>父页面:</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Bifrost-Common/files/reference/Simulation/Bifrost_Common_reference_Simulation_MPM_html.html">MPM</a>
      </div>
  
    </div>
  
    </div></div>

    

</body>
</html>
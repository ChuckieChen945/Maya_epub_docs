<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Rendering">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099">
<meta name="language" content="CHS">
<title>创建自定义装备</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>创建自定义装备</h1></div>
</div>
</div>

<div class="body" id="WS1A9193826455F5FF-56C0CD8012A8003217A-1D7C"><p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C65"> 将自定义装备摄影机添加到场景中的方法有以下两种。</p>
<ul class="ul" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C64"><li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C63">方法 1：使用 MEL 或 Python 脚本编写装备创建方法并在 Maya 中注册装备。这是首选方法。</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C62">方法 2：将现有装备编辑为可由 Maya 识别。</li>
</ul>
<div class="section" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C61"><h2 class="title sectiontitle">方法 1</h2>

</div>
<p class="li listintro" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C5F"> 编写 MEL 或 Python 脚本程序</p>
<ol class="ol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C60"><li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C5D">通过编写 MEL/Python 脚本创建自定义装备。<div class="note tip" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C5C"><span class="tiptitle">提示：</span> 
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-096E899F-C8F8-4F75-B996-441E4283205E">最好是使用 Python 脚本创建装备。</p>

</div>
</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C5B">描述摄影机装备的层次并定义中心摄影机、左侧摄影机和右侧摄影机的关系。<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C5A">所有装备节点必须以一台摄影机为父对象（直接或通过任意数量的变换）。该摄影机作为根装备，并作为中心摄影机。无法在装备结构内部使用实例化。</p>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C59">创建过程不应使用任何参数，并且必须返回由三个字符串组成的数组。第一个是装备的根节点，第二个和第三个分别是左侧摄影机和右侧摄影机。</p>
</li>
</ol>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C58">有关示例，请参见命令文档中的 <span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-1B243DC9-2FCB-4790-9E40-F5C03EBDDCA1"> StereoRig Manager</span><span class="ph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-785D8102-B8FA-4CF3-97E0-23FD67A68E90">：</span><a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Tech-Docs/Commands/stereoRigManager.html" target="_blank">stereoRigManager </a></p>
<p class="li listintro" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C56">注册您的自定义装备</p>
<ol class="ol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C57"><li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C55"> 选择<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-9FF637E8-1526-40CD-ABDD-76BB86797CA1">“立体 &gt; 编辑器 &gt; 自定义立体装备”(Stereo &gt; Editors &gt; Custom Stereo Rig)</span>。<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C53">此时将显示<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-FE514D9D-9836-44CE-826F-347D6960DFD2">“自定义立体装备编辑器”(Custom Stereo Rig Editor)</span>窗口。</p>
<div class="fig fignone" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF-E569A012180CE5891-DCD"><img class="image" width="430" height="280" src="../images/GUID-4861391E-476B-4598-B821-9CA3F1B1198A.png"></div>
</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C51">在<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-A3CC6F50-68E7-4439-A2E0-FA94F4D45AE1">“注册新装备”(Register a new rig section)</span>区域中，选择自定义装备的名称。选择用于创建自定义装备的语言，即 Python 或 MEL。输入要用于创建您的自定义装备的 Python 或 MEL 程序，例如： <p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-58F6">
<samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-4BCE956B-96E1-45D8-B92E-C9FCEE7A0A93">maya.app.stereo.stereoCameraComplexRig.createRig.</samp>
</p>
</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53DA">在<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-790C988E-11E3-4F0B-A126-77BDB51B18A4">“摄影机集回调”(Camera Set Callback)</span>区域中，指定回调（如果正在使用多重摄影机装备）。 <p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53D9">每个自定义装备可以指定每当该装备附加到摄影机集时调用的回调。摄影机集保存到多重摄影机装备的各层上，并包含用于保存与各层相关的信息的窗口。创建装备并将其指定给多重装备的某一层后，将执行该回调，以使自定义装备知道已发生该操作并允许执行任何自定义操作。多重装备的每一层都如此。 </p>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53D8">在创建所有多重装备后，会将一个最终回调发送到同一个方法，以指示 Maya 已完成多重装备的创建。回调的语法包含下列标志： </p>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53D7">每层：&lt;nameOfCallback&gt; -cameraSet &lt;multiRigName&gt; &lt;rigNodeName&gt; </p>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53D6">最终回调：&lt;nameOfCallbak&gt; -cameraSet &lt;multiRigName&gt; -allDone 1 </p>
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-575EAB4C124F5234AA8-53D5">有关多重摄影机装备的详细信息，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Rendering/files/GUID-6FDC2694-1BAF-471E-B041-BED690F02637.htm">创建多重摄影机装备</a>和<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Rendering/files/GUID-6FD21808-C100-4278-A950-5AD4515FC7B3.htm">多重摄影机装备工具</a>。</p>
</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C50">单击<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-8AF9C242-6B4E-4AFB-BF7E-4A6BB33208C4">“添加新装备”</span>。 <p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4F">现在，通过选择<span class="ph uicontrol" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-9AFE778A-4D2D-4087-96B7-1C448D2D34FB">“面板 &gt; 立体”(Panels &gt; Stereo)</span>“新立体摄影机（&lt;您的自定义装备&gt;）”，您可以访问自定义装备。</p>
<div class="note note" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4E"><span class="notetitle">注：</span> 
<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-06367EFD-8B8F-4627-B6CD-24DE8BD965CB">还可以通过使用 StereoRig 管理器命令注册您的自定义装备。有关如何使用该命令注册自定义装备、查询默认装备或删除装备的示例，请参见 StereoRig 管理器命令文档。</p>

</div>
</li>
</ol>
<div class="section" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4D"><h2 class="title sectiontitle">源代码示例</h2>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4C">Maya 附带一个已启用的默认立体装备。提供的源代码在 Python 模块中：<samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-A2E07E2F-DC69-48C3-907B-2723BFA3B2E3">...\Python\Lib\site-packages\maya\app\stereo</samp>。在该目录中，还可以找到以下代码示例：</p>

<ul class="ul" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF5CF1D02511B1D000978-54B7"><li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF5CF1D02511B1D000978-54B6"> <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-9D1CBB7D-1BE3-4468-A329-FE1E2CF09159">stereoCameraDefaultRig.py</samp> 是用于创建默认 Maya 装备的程序。</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF5CF1D02511B1D000978-54B5"> <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-DB07EA22-58B4-4477-9D43-781860554E21">stereoCameraComplexRig.py</samp> 使用三对摄影机创建更复杂的装备。</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF5CF1D02511B1D000978-54B4"> <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-46896E24-ED79-4F85-A90B-361703DB7002">stereoCameraHierarchicalRig.py</samp> 使用 Maya 默认装备（已设置为另一个摄影机的子对象）的三个副本创建与 stereoCameraComplexRig 相似的设置。</li>
<li class="li" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS1A9193826455F5FF-316FD70E123DECE8002-5465"> <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-F580F294-099F-4BDA-A822-73BEFE45CC1A">stereoCameraProxyRig.py</samp> 说明了如何创建使用 proxyRig 属性将装备链接到现有 Maya 装备的立体摄影机装备。如果您的立体摄影机装备不包含直接位于立体装备根下的摄影机图形，这些类型的装备是必要的。 </li>
</ul>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4B"> <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-AEF8EE6B-666F-4533-941C-D1FA2E821701">...\scripts\others\stereoCameraSimpleRig.mel</samp> 创建最简单的装备，其中摄影机用于右眼和中心眼。左侧摄影机被设置为子对象。</p>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C4A"><samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-60591218-6AE6-492F-BF4B-CE4A79F3B2C0">stereoRigManager</samp> 示例中使用了这些脚本。</p>

</div>
<div class="section" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C49"><h2 class="title sectiontitle">方法 2</h2>

</div>
<div class="section" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C48"><h2 class="title sectiontitle">使现有装备与 Maya 兼容</h2>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C47">如果存在现有装备，或者需要在 Maya 之外创建装备，可以使现有装备与 Maya 的要求兼容。但是，所有摄影机必须以公共变换为父对象，称为装备根。</p>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C46">调用以下 Python 代码：</p>

<pre class="pre codeblock">
import maya.cmds as cmds
from maya.app.stereo import stereoCameraRig
</pre>

<pre class="pre codeblock">
# Make sure the stereo plug-in is loaded
cmds.loadPlugin("stereoCamera", quiet=True)
stereoCameraRig.makeStereoCameraRig(rigRoot, rigTypeName, leftCam, rightCam)
</pre>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C45">其中 <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-A26C01FC-1BBA-4710-98FB-73D68215383F">rigRoot</samp>、<samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-AAB6DA4A-A5E7-40B9-8329-46A034267B78">leftCam</samp> 和 <samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-332DC93A-3833-4457-B197-5FF5E6BD0F9A">rightCam</samp> 分别是根变换的名称、左侧摄影机对的名称和右侧摄影机对的名称。<samp class="ph codeph" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__GUID-84E3A6DF-2B1A-49DB-B812-D5ACBC7CCD7F">rigNameType</samp> 是用于标识装备类型的用户定义的字符串。</p>

</div>
<div class="section" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C44"><h2 class="title sectiontitle">更改默认的左侧摄影机对和右侧摄影机对</h2>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C43">如果已装备多个左侧和右侧摄影机对，您可以更改用于交互式显示的默认左侧对和右侧对。 </p>

<p class="p" id="GUID-5CD17077-6FCF-49E9-9F7E-911DD76E0099__WS73099CC142F48755-4607E7CC11B1CFFF571-5C42">调用以下 Python 代码：</p>

<pre class="pre codeblock">
<pre class="pre codeblock">
import maya.cmds as cmds
from maya.app.stereo import stereoCameraRig
</pre>
<pre class="pre codeblock">
# Make sure the stereo plug-in is loaded
cmds.loadPlugin("stereoCamera", quiet=True)
</pre>
<pre class="pre codeblock">
stereoCameraRig.setStereoPair(rigRoot, leftCam, rightCam)
</pre>
</pre>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Rendering/files/GUID-0771E796-7B22-4428-8507-BDF67780E635.htm">使用立体摄影机</a></div>
</div>
</div>

</body>
</html>
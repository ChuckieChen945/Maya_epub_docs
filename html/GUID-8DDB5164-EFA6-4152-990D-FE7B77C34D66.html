<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Scripting">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66">
<meta name="language" content="CHS">
<title>eval</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>eval</h1></div>
</div>
</div>

<div class="body"><p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-122E"> 执行 MEL 命令。 </p>
<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-122C"> 字符串 eval（字符串命令） </p>
<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1229"> <em class="ph i" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__GUID-036A4695-ECC9-4EB3-B322-C431A46F5853">命令</em>是以引号括起的命令字符串或包含命令的字符串变量。 </p>
<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1228">返回值包含执行命令返回的命令输出。 </p>
<div class="note note" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-1257E12111BF108800E5C6"><span class="notetitle">注：</span> 
<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__GUID-A06F61E4-2DA6-41C5-9BCC-116A36C75D63">eval 命令在 MEL 范围的顶层执行。因此，它可以识别全局变量，但不会识别在程序内定义的变量（局部变量）。有关详细信息，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-5B492F70-86B5-4CE0-B102-6005E86F1960.htm">全局变量和局部变量</a>。 </p>

</div>
<div class="section" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1227"><h2 class="title sectiontitle">示例 1</h2>

<pre class="pre codeblock">
eval("select -cl")
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1226">执行命令 select -cl，取消选择场景中的所有对象。尽管本示例中未使用返回值，但它仍包含命令输出。 </p>

</div>
<div class="section" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1225"><h2 class="title sectiontitle">示例 2</h2>

<pre class="pre codeblock">
string $cmd = "select -cl";
eval($cmd);
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1224">第一个语句将命令字符串 select -cl 指定到字符串变量 $cmd。第二个语句执行 $cmd 的内容，即命令 select -cl。 </p>

</div>
<div class="section" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1223"><h2 class="title sectiontitle">示例 3</h2>

<pre class="pre codeblock">
string $mycommand = "sphere";
eval($mycommand+"-r 5");
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1222">第一个语句将字符串 sphere 指定给变量 $mycommand。第二个语句将 -r 5 附加到字符串 sphere，并执行完整命令 sphere -r 5。这将创建半径为 5 个栅格单位的球体。 </p>

</div>
<div class="section" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1221"><h2 class="title sectiontitle">示例 4</h2>

<pre class="pre codeblock">
string $a[];
$a = eval("ls -lights");
print($a);
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1220">第一个语句定义名为 $a 的字符串数组。第二个语句执行 MEL 命令 ls -lights，然后将命令输出指定到数组 $a。第三个语句将 $a 的内容显示到<span class="ph uicontrol" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__GUID-319BEEFE-A325-4847-B817-5E853CF4F9C5">“脚本编辑器”(Script Editor)</span>，如下所示： </p>

<pre class="pre codeblock">
ambientLightShape1
directionalLightShape1
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121F">每行命令输出将显示在新行中。每行命令输出都是一个数组元素。Maya 格式数组在新行上输出每个数组元素。 </p>

</div>
<div class="section" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121E"><h2 class="title sectiontitle">示例 5</h2>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121D">假定已经在 Maya 脚本目录中创建了名为 bunk.mel 的 MEL 脚本文件，而且其中包含该程序： </p>

<pre class="pre codeblock">
global proc string bunk()
{
string $fog;
if (rand(2) &lt; 1)
	$fog = "particle";
else
	$fog = "sphere";
return $fog;
}
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121C">进一步假设创建的表达式为： </p>

<pre class="pre codeblock">
string $name = bunk();
eval($name);
print($name);
</pre>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121B">第一个表达式语句在 bunk.mel 脚本文件中执行 bunk() 程序。在 bunk 程序中，if-else 语句生成介于 0 和 2 之间的随机浮点值，然后将该值与 1 比较。 </p>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-121A">如果值小于 1，该语句会将 MEL 命令字符串 particle 指定到 $fog。如果该值大于 1，$fog 将接收命令字符串 sphere。 </p>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1219">该程序将完成执行并将 $fog 的值返回给调用程序，即表达式中的 bunk()。这会将命令字符串指定给变量 $name。 </p>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1218">eval 函数将执行存储在 $name 中的命令字符串。例如，该语句可能会执行 particle，在工作区的原点创建粒子。 </p>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1217">第四个语句显示 $name 的内容，例如，particle。 </p>

<p class="p" id="GUID-8DDB5164-EFA6-4152-990D-FE7B77C34D66__WS73099CC142F48755-3D114B7511841AEFA9F-1216">表达式将执行每个帧，并创建一个新粒子或球体。 </p>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-0B98558F-A575-498C-A12B-74C9D095C044.htm">常规命令</a></div>
</div>
</div>

</body>
</html>
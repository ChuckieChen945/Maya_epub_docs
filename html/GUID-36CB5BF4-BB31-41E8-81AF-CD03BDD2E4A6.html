<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Customizing">
<meta name="created" content="15/10/2024">
<meta name="parent-product" content="MAYAUL">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="modified" content="06/03/2024">
<meta name="topicid" content="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6">
<meta name="language" content="CHS">
<title>自定义搜索</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>自定义搜索</h1></div>
</div>
</div>

<div class="body"><p class="p">使用<a class="xref" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=MAYAUL&amp;l=CHS&amp;accessmode=live&amp;guid=GUID-A41539AD-F566-4F3D-8671-FE6237BB3C2B"><span class="ph uicontrol">搜索</span></a>功能，您可以直接在字段中键入菜单、工具或命令来查找它们。通过将自己的运行时命令添加到结果中或定义标记来过滤结果，您可以自定义在键入特定搜索词时显示的结果。
	 </p>
<p class="li listintro">自定义<span class="ph uicontrol">搜索</span>首选项</p>
<ol class="ol" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__OL_5A3D656781EA41498548FAC69D4C56D7"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_75DA906CB4C24BBFAE2C49D4550373BB">打开<span class="ph uicontrol">“搜索”(Search)</span>字段。
		</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_5444A1C7E41849A384FDEA9519A1841F">右键单击搜索字段，然后选择<span class="ph uicontrol">“首选项”(Preferences)</span>。
		  <p class="p">Maya 将显示<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Customizing/files/GUID-B643DCBD-32A1-4DB1-945B-B29238AAF746.htm"><span class="ph uicontrol">搜索首选项(Search preferences)</span></a>窗口。
		  </p>
 
		</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_353E3E226EF64357B67C0D57FE3414D3">调整适当的首选项。
		</li>
</ol>
<p class="li listintro">自定义标记</p>
<ol class="ol" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__OL_6CBD1CA12EED4F0B92B354C54A9305B2"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_16D3514129314D9F9C1EE83009991676">打开<span class="ph uicontrol">“搜索”(Search)</span>字段。
		</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_A121B201F3A04B32963A2493C2632745">在“搜索”(Search)字段上单击鼠标右键，然后选择<span class="ph uicontrol">“管理过滤标记”(Manage Filter Tags)</span>。
		</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_220A57FE98EC4B89A63DF5661CA62AA3">单击标记窗口右上角的齿轮图标，或单击鼠标右键以执行以下操作之一：
		  <ul class="ul" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__UL_DE703A30753F4C8A8332A48033EAA7E4"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_1C74EBBD3CA3410D92CCB5D4E8467361"><span class="ph uicontrol">新建标记(New Tag)</span>：添加新标记 
			 </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_C5C9B81D66EC4C94A5D3A0F9B37CFAF9"><span class="ph uicontrol">标签颜色(Label Color)</span>：更改标记颜色。
			 </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_638076F5460E4886B8D64A0DB43BEA3D"><span class="ph uicontrol">重命名标记(Rename Tag)</span>：更改现有标记的名称。
			 </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_8E4B599565674F37BDE513B60496A225"><span class="ph uicontrol">删除标记(Delete Tag)</span>：移除现有标记 
			 </li>
</ul>
 
		</li>
</ol>
<div class="section" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__SECTION_93B454C908BD49F0B312238342288D2B"><h2 class="title sectiontitle">添加新命令</h2> 
		 
		<p class="p">使用 runTimeCommands，可以向<span class="ph uicontrol">“搜索”(Search)</span>中添加新命令，例如用于第三方插件的命令。
		</p>
 
		<p class="li listintro">在“搜索”(Search)中显示某个命令</p>
<ol class="ol" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__OL_8A74D8F2A6754FE6BDF305CA725259CF"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_0A0499ECCD4B4FE886A86612E2A19D4D">在脚本编辑器中，创建一个带以下标志的 runTimeCommand：
			 <ul class="ul" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__UL_8E830442AF0C4BC582B8CED520AE34FB"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_6ECD22C0B9B24DEA851E456C99FC1CEE"> 
				  <p class="p"> <span class="ph codeliteral">-label</span> ：操作的名称。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_C1D1D2491ECC4AC7AAC63B8765062F45"> 
				  <p class="p"> <span class="ph codeliteral">-annotation</span> ：命令用途的简短描述。“搜索”(Search)也搜索此字符串。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_992628A319C44F44A4523E6BE9FFC434"> 
				  <p class="p"> <span class="ph codeliteral">-category</span> ：此操作在菜单中的位置，例如 Menu items.Common.Edit) - 非菜单项不需要此标志。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_D2976393760D4C92AB1C48D1E82AB427"> 
				  <p class="p"> <span class="ph codeliteral">-command</span> ：要执行的命令。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_612245A1C0C946E9B52303A37AA703B9"> 
				  <p class="p"> <span class="ph codeliteral">-plugin</span> ：插件名称（如果命令与插件相关）- 这样，我们可以在运行相应命令之前加载相应插件（如果需要）（这将是应用程序范围的选项）。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_FD39BDA3E9F04A6F84DC8D5420D80581"> 
				  <p class="p"> <span class="ph codeliteral">-image</span> ：可选的图标路径。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_6E9B95D8713942C1969572A449DA64E2"> 
				  <p class="p"> <span class="ph codeliteral">-url</span> ：指向外部文档的可选自定义 URL。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_5800CE5E9B1942FB90763ED78FBABC79"> 
				  <p class="p"> <span class="ph codeliteral">-tags</span> ：命令的可选标记。例如 -tags "tag1;tag2"。
				  </p>
 
				</li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_D7B276192FA24B41850DDDA71DE3A9B4"> 
				  <p class="p"> <span class="ph codeliteral">-keywords</span> ：帮助搜索结果的可选关键字，例如 -keywords "ocean; water"。
				  </p>
 
				</li>
</ul>
 
			 <div class="p">例如，下面是新的“Bevel Cube”命令的已完成 runTimeCommand，包含在名为“customCommands.mel”的文件中：<pre class="pre codeblock">runTimeCommand
        -label      "Bevel Cube"
        -annotation "Create a bevelled cube"
        -command    "polyCube; polyBevel"
        -keywords   "chamfer"
        -tags       "Polygon Creation;Polygon Editing;YourStudio"
        bevelCube;

</pre>
 
			 </div>
 
			 <div class="note note" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__GUID-26C860BA-FFA8-46BA-BA0C-65CBCA7E1615"><span class="notetitle">注：</span> 如果菜单项已经存在，则应将其指向其现有的 runTimeCommand，以避免出现重复代码。
				<div class="p">例如 <pre class="pre codeblock">menuItem -rtc "UnlockNormals";</pre>
 
				</div>
 
				<p class="p">这样，菜单项可以查找 runTimeCommand <span class="ph uicontrol">UnlockNormals</span> 以获取其标签、注释、图像和命令。
				</p>
 
			 </div>
 
		  </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_819961DBFF2641299DA82112884679D6"> 
			 <p class="p"> 若要与插件一起加载运行时命令，请将 <span class="ph codeliteral">MAYA_RUNTIME_COMMANDS</span> 环境变量添加到插件 .mod 文件中。
			 </p>
 
			 <p class="p">例如 <span class="ph filepath">MAYA_RUNTIME_COMMANDS=$MAYA_RUNTIME_COMMANDS:/path/to/your/customCommands.mel</span> 
			 </p>
 
			 <div class="note note" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__GUID-1A68405B-6D09-43D3-8DD7-81B1BECB79BA"><span class="notetitle">注：</span> 路径应相对于插件模块。
			 </div>
 
		  </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_FFB6E9B2C2B44C24ADA58D016A6EBF7C">重新启动 Maya。
			 <p class="p">Maya 启动时，将会源化新的运行时命令。
			 </p>
 
		  </li>
</ol>
 
		<div class="section" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__SECTION_651023C622AF4D338CE41035FDD0B888"><h3 class="title sectiontitle">有关添加新命令的重要说明</h3> 
		   
		  <ul class="ul" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__UL_DD0EC08FA36946678A9262BB4E2C4680"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_96186910FC284D4491C684FBD0C55EC3"> 
				<p class="p"> 不要结合使用 <span class="ph codeliteral">getPluginResource</span> 与 <span class="ph codeliteral">runTimeCommand</span>否则，注册 runTimeCommand 时，将无法加载插件。
				</p>
 
				<p class="p"> 而应使用 <span class="ph codeliteral">displayString</span>或 <span class="ph codeliteral">uiRes</span> 以获取国际化的字符串。
				</p>
 
				<div class="p">例如 <pre class="pre codeblock">// Register a string resource.  Important: prefix your constants! 
m_myplugin.kFoo //not just kFoo.
displayString -value "bar" m_myplugin.kFoo; 
// Print it using displayString
print `displayString -query -v "m_myplugin.kFoo"`;
// Print it using uiRes
print uiRes("m_myplugin.kFoo"));</pre>
 
				</div>
 
			 </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_84812EA7DBD941FCB0F1EF86259E4700">尝试使 runTimeCommand MEL 文件尽可能精简，否则它可能会影响 Maya 的启动时间。
			 </li>
<li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_999D04BF653A4B8183685E48F4FBA461">如果希望与插件无关的项目显示在<span class="ph uicontrol">“搜索”(Search)</span>中，只需要注册 runTimeCommand 文件，就像在 Maya 中处理任何其他自定义菜单一样（即<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Customizing/files/GUID-F3D60949-2372-47F5-B8D6-78D73F78D587.htm">通过 userSetup.mel</a>）。数据库是实时的，如果在打开的 Maya 会话期间的任何时候注册新的 runTimeCommand，它将在<span class="ph uicontrol">“搜索”(Search)</span>中可用。
				<div class="p">例如，如果您有一个名为“userSetup.py”的脚本，用于创建包含特殊 Foo 渲染脚本的菜单，您需要将以下内容：<pre class="pre codeblock">cmds.menuItem(p=renderingMenu, l='Submit to Foo', c='import foo_maya;foo_maya.submit_dialog()')</pre>
 
				</div>
 
				<div class="p">转化为此内容： <pre class="pre codeblock">#Create runTimeCommand
cmds.runTimeCommand('SubmitToFoo', d=True, label='Send to Foo', annotation='Send your scene to Foo for cloud rendering.', category='Menu items.Cloud.Render', 
command='import foo_maya;foo_maya.submit_dialog()', keywords='render', tags='Render' )

#Create menu
cmds.menuItem(p='MyMenu', sourceType='mel', rtc='SubmitToFoo')</pre>
“Submit to Foo”脚本现在将显示在<span class="ph uicontrol">“搜索”(Search)</span>中。
				</div>
 
			 </li>
</ul>
 
		</div>
 
	 </div>
<div class="section" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__SECTION_A12EA39379CC484688B64F2F3797D809"><h2 class="title sectiontitle">相关主题</h2> 
		 
		<ul class="ul" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__UL_AB7940732E834928A80A6ACB2B76DADC"><li class="li" id="GUID-36CB5BF4-BB31-41E8-81AF-CD03BDD2E4A6__LI_ADCB59014D9847CD85BD5028332E431D"><a class="xref" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=MAYAUL&amp;l=CHS&amp;accessmode=live&amp;guid=GUID-A41539AD-F566-4F3D-8671-FE6237BB3C2B">使用“键入以查找”(Type to Find)查找菜单、工具和对象</a> 
		  </li>
</ul>
 
	 </div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Customizing/files/GUID-D1DFBB1A-E4FD-416F-92E7-A715D58BE815.htm">自定义</a></div>
</div>
</div>

</body>
</html>
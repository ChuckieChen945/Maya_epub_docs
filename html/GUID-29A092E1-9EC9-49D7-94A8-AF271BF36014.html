<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-LightingShading">
<meta name="created" content="15/10/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="modified" content="12/11/2021">
<meta name="topicid" content="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014">
<meta name="language" content="CHS">
<title>将组转化为函数并检查着色器代码</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>将组转化为函数并检查着色器代码</h1></div>
</div>
</div>

<div class="body"><p class="li listintro" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-684EDA29-A57B-443D-98F8-3D830CA7C9F9">创建新组</p>
<ol class="ol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__OL_1721D22F1C344A5EA14BA8A7DB189216"><li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_FEEE402E13C24E3CA874825931D9619B">单击组节点上的 <img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_B415B23B18DF44188075942268BC82F5" src="../images/GUID-A0BF4325-29A5-4BBB-BA85-4EE11D93834B.png"> 以进入组视图。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_37A92B24020F444AAAE296185B7D5BC9">选择<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-978CA44E-AD40-43A7-8D39-E09594A74778">“硬件着色器节点 &gt; 数学 &gt; 相加”(Hw Shader Nodes &gt; Math &gt; Add)</span>和<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-F52596D8-03B7-45D7-815D-5B5507C5A863">“硬件着色器节点 &gt; 值 &gt; 颜色”(Hw Shader Nodes &gt; Value &gt; Color)</span>，以分别创建<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-2FFADC24-7E6E-4E11-A5F6-C7426AB5AF4B">“相加”(Add)</span>节点和<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-614C4802-9660-4C07-8551-3A4CB80FDD7D">“颜色”(Color)</span>节点。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_35C0C5BA4EE0478AAFA73433CD30FF70">连接节点，如下所示： <ul class="ul" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__UL_976ED686AD454ED2A238E7FB6567EF61"><li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_E80F97C9C9D046B48901BFFCF5175564">将<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-A60C50D4-9684-4DB7-8AAE-B40C9C7FA1ED">“颜色”(Color)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-A6E98B29-2EC0-4919-84AC-4A42F1428100">“RGB”</span>属性连接到<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-058148EA-2550-4A18-91E9-A0CC94B75C7B">“相加”(Add)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-0A42A4FD-6532-44F2-B527-DFB8B526EABB">“值”(Value)</span>属性。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_C9FFE99137C64A3EACB796E44EAB20BE">将<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-7EF16FBA-FB99-4391-94FF-ADDD3284FF92">“相乘”(Multiply)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-B9694BCF-A704-44F8-9D77-6979035A49C0">“结果”(Result)</span>属性连接到<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-97EBCC23-8478-4BC0-97E8-00F58C61E2A1">“相加”(Add)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-B2C60BA2-06E7-4BD1-BB7B-81600FD8F002">“值”(Value)</span>属性。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_A873591F90514FEEA07307DD1193A561">将<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-78103E10-3D17-4665-9C55-07F7C5BDB59B">“相加”(Add)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-B468AC90-3382-4E22-AA69-B500852A96CA">“结果”(Result)</span>属性连接到组节点的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-85E95DE0-ACE5-4BD7-BA8B-58C74805C301">“漫反射颜色”(Diffuse Color)</span>属性。 </li>
</ul>
 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_8C866A449A974E078FD1D1C8DE8F3BA1">选择新创建的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-24393047-CF9E-4195-8822-54814C4A245F">“颜色”(Color)</span>节点。在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-168E82EE-B0F7-4ADF-9579-FF5F5A32398D">“属性编辑器”(Attribute Editor)</span>中，输入名称 OffsetColor 和顺序编号 3。 <div class="fig fignone" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__FIG_743433EFF80643A6B42DAEEDB29DCAF7"><img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_121DDC5C2FD741DB989A91DC217D1F67" src="../images/GUID-77940299-C43D-493C-945B-DB388962E1F2.png" width="480"></div>
 <p class="p" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-AA57CDEC-76B1-4F8E-AD40-D02BD7ACCA91">OffsetColor 现在显示在组节点<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-1B262B58-BD71-4715-82E9-6FE5C01E7AC8">“属性编辑器”(Attribute Editor)</span>中。 </p>
 <div class="fig fignone" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__FIG_D5CD0DF7764D40C2BE91F75294401B21"><img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_C4FFFAFC5A2A43CD891EADFBABB4E75B" src="../images/GUID-4BE734E1-D365-45B6-BEBE-1E2EB4417074.png"></div>
 </li>
</ol>
<p class="li listintro" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-8C35E0E6-AE81-4038-A1F8-B6510AA5209B">将组转化为函数</p>
<ol class="ol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__OL_F2F5A80B4ED545339A7B34716FEC52D9"><li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_882543F5FED94866AFA4DC75B8D7B3A8">选择<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-42617051-FC6A-4887-B13A-9ABBF386BDDC">“相乘”(Multiply)</span>和<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-89E560DC-D4D4-4B79-BE67-71B9345AEAC4">“相加”(Add)</span>，然后选择<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-DD96E9EA-40A5-4AF8-9128-EF644661DB1B">“组 &gt; 创建组”(Group &gt; Create Group)</span>。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_4CEB8A8152CF4F1A957DCCD4965A1432">单击新创建组上的 <img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_60A131AE8508421EAF377A97D812BD9C" src="../images/GUID-A0BF4325-29A5-4BBB-BA85-4EE11D93834B.png">。在组视图中，选择组节点，然后在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-CD84169A-8288-498D-8CDE-77E8F35864BE">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-7F69116F-29E1-4463-9440-739024E425FB">“名称”(Name)</span>字段中输入 MyColorFunction。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_647B87A82944401A93429A021A143CEA">在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-8027D230-731C-4CB8-9DD0-84959B6F1E79">“属性编辑器”(Attribute Editor)</span>中，启用<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-D2483504-FDD6-47B6-A711-E80425400B09">“组是函数”(Group is a function)</span>，以便在着色器代码中将这些节点的输出封装为函数。 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_375FED402FF74893810F59ABCA285819">为组节点端口指定唯一名称。当前，所有端口都命名为<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-3047E388-5D68-4121-9109-3FBE244766A9">“值”(Value)</span>，因此着色器无效，并在 Viewport 2.0 中显示为红色。 <p class="p" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-C0C9AB30-B94B-4C25-B3B3-A3D64FD28C9E">在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-4690F02F-6C8F-45C0-85FE-3F20DCFC8247">“属性编辑器”(Attribute Editor)</span>中，填写以下信息： </p>
 <ul class="ul" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__UL_EDE7F4FD62DC4174B85F609EE068B6FF"><li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_2E5974DB838342DA9132FB144AEAA626"><span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-711825CC-3EE4-4FA3-809A-280D5A28D5B8">“活动套接字”(Active socket)</span>：0；<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-5D5C14F4-69F8-4F2B-9CDE-E8C61BA42F37">“活动套接字标签”(Active socket label)</span>：ColorA </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_EEC5E764C443499FB50279588201667F"><span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-282EAA22-639A-4348-8179-F198A2F477E4">“活动套接字”(Active socket)</span>：1；<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-627768A4-8BC8-46EE-AE4E-847E863A4391">“活动套接字标签”(Active socket label)</span>：Multiplier </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_1FE20472BD6D45BBAD23B25F37913561"><span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-C8A42B2B-EFCF-49FC-8831-DCE2E71E5408">“活动套接字”(Active socket)</span>：2；<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-17D7DFB0-E273-4C30-803B-4428E3432CF5">“活动套接字标签”(Active socket label)</span>：ColorB </li>
</ul>
 <div class="fig fignone" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__FIG_C94E49AAF8E14C2FA238DBCD7514323B"><img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_9FFC18824D47424F88A61CE41F2C5CA8" src="../images/GUID-D02513CB-CF50-41A1-A7B5-47B1D5D605A9.png" width="480"></div>
 <div class="note note" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-34BA986E-3911-4358-A541-D73C1E28FE83"><span class="notetitle">注：</span> 将组转化为函数时，所有组节点端口必须具有唯一的名称。否则，着色器将变为无效。 </div>
 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_6D92083883CE4C5988B3DE24CC78D9F8">退出组视图，然后选择<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-4B3A78B1-3CE6-4E16-97E9-B4A80A13ABFD">“工具 &gt; 计算图表”(Tools &gt; Compute Graph)</span>。 </li>
</ol>
<p class="li listintro" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-AA768677-BC04-4C58-BEC4-AB4B262CF4C0">保存着色器文件并检查着色器代码</p>
<ol class="ol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__OL_57BC1A60C33543AD99FC25F1DE41CF39"><li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_0A79B468F10F43C798FEA8A9712A76CD">选择<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-E1AAC2E6-BC71-4E92-9CA7-2853F85962FA">“材质”(Material)</span>节点，在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-0FCACFD8-862C-4FC4-9DFC-7231DE75761B">“属性编辑器”(Attribute Editor)</span>中输入着色器文件的文件名并按 <img class="image" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__IMAGE_62A35E72929049EEA9207F75E3046535" src="../images/GUID-6222D533-8226-4499-A976-3C4A762C2345.png">，然后单击<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-C52B08DB-1FAE-43A7-BFDE-AF3535044EC8">“HwShader/保存到磁盘”(HwShader/Save to Disk)</span>。 <p class="p" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-7058DD03-5FC0-490D-B638-912ABFE6EAC6">保存着色器文件的路径在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-FAA8FCCC-0F80-471F-A2B2-54B4BCECCB65">“ShaderFX”</span>编辑器窗口中显示为工具提示。 </p>
 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_BD21A1CBDF3944B0BBEFB7FA56C1E0DD">检查着色器文件并搜索 MyColorFunction。 <p class="p" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-D23FB584-76E5-4F89-9931-98AECD00B585">MyColorFunction 定义为着色器文件中的函数。SHADERDATA 结构被列为输入。这是默认设置。 </p>
 </li>
<li class="li" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__LI_873C5DA519C24CE4966C50AC5909564F">若要禁用 Cleaner 代码的此设置，请输入 MyColorFunction 组的组视图，选择组节点，然后在<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-3E4F7BBF-07E9-4E5E-9333-656A7FEEB7C5">“属性编辑器”(Attribute Editor)</span>中启用<span class="ph uicontrol" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-5F1C3792-A9BD-4132-9C5B-A088CA597433">“不添加 DATA 结构作为函数输入”(Don't add DATA struct as function input)</span>。 <p class="p" id="GUID-29A092E1-9EC9-49D7-94A8-AF271BF36014__GUID-9FEB068D-76A3-4AB9-B6B6-C4F83DD8EB6A">重新保存着色器文件，以查看 SHADERDATA 结构是否不再列为输入参数。 </p>
 </li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-LightingShading/files/GUID-D56DA6EB-4D27-4B8A-8C0C-F654212D0BCD.htm">ShaderFX 组示例工作流</a></div>
</div>
</div>

</body>
</html>
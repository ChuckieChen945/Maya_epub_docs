<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-CharEffEnvBuild">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="modified" content="12/11/2021">
<meta name="topicid" content="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A">
<meta name="language" content="CHS">
<title>基本表达式示例</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>基本表达式示例</h1></div>
</div>
</div>

<div class="body"><p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-49AD1C89-E8DA-4883-A43D-D94750002D5E"> 本部分提供了常用 XGen 表达式的简单示例。它们旨在帮助您进一步了解如何构建表达式。还可以使用这些表达式作为更复杂表达式的构建块。要在“描述”(Description)中使用这些示例，请单击要控制的属性旁边的图标 <img class="image" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__IMAGE_23F00E4AAA87470782FC5B0FFB8BDEDC" src="../images/GUID-F4497753-0A89-4644-A7EC-1007B4821A20.png">，然后在<span class="ph uicontrol">“XGen 表达式编辑器”(XGen Expression Editor)</span>中添加表达式。 
	 </p>
<p class="p">如果初次使用表达式，请参见 <a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-BFA336C7-BC8D-4580-AEA6-4085BA1F1921.htm">XGen 表达式基础知识</a>。 
	 </p>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_4F015EA248E1496AB9CF6BA1A00E377C"><h2 class="title sectiontitle">贴图表达式</h2> 
		 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-D7AE3EFA-5778-42EE-9C57-5581EB988C87">贴图表达式将路径设置为 Ptex 贴图文件。当您使用 <span class="ph uicontrol">“绘制”工具</span>，该贴图在 XGen 表达式是自动创建的。如果要使用在 Maya 外部创建的 Ptex 贴图，则您需要使用贴图表达式，以将其应用于“描述”(Description)。 
		</p>
 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-2C28D8C9-2315-4DBA-A8B2-1904F6D92179">为“长度”(Length)绘制 PTEX 贴图时，会创建以下贴图表达式： 
		</p>
 
		<pre class="pre codeblock">$a =map('${DESC}/paintmaps/length/'); #3dpaint, 200
$a
</pre>
 
		<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_FB3620DD44684EFCB7D16CEDEF60161E"><h3 class="title sectiontitle">表达式说明</h3> 
		   
		  <ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_F7309765DD8A48228AF4FE6D553AA636"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_858A4691BFE940DF8A87D3A5DE6F331C"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-7FF02F94-3D41-4FDE-912C-96BB34EC5E5D">$a</samp> - 使用表达式修改的默认局部变量。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_BBFF9DE3762943A3824327BD4664FA26"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-C7C7640D-7263-406E-9020-91201EA3FC94">map()</samp> - 用于描述 Ptex 贴图位置的文件路径的函数。文件路径包括： 
				<ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_2EB950DAF45A4A59A3258BD4BA4BA723"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_0B0E59CB4591426F98CB2862CBBD51A3"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-9E1E3A62-8FDB-4410-8B4A-20FD8AB5E036">${DESC}</samp> - 基于“描述”(Description)项目位置的相对文件路径（请参见 <a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-56075F6B-D1C9-4056-BDBC-9766C44AB88C.htm">XGen 中的 Ptex 贴图文件位置</a>）。 
				  </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_ED946CCFEAB041BB9A7215B2FB9D9C38"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-B5E93A99-2F44-4B71-9A29-0E74C05ADD1E">paintmaps/length</samp> - Ptex 文件的文件路径的延续。 
				  </li>
</ul>
 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_A8E8FDA4330442C197D5CAA3DEF0C72C"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-5800B353-8D1D-42DE-9B42-08194B8E06F0">#3dpaint, 200</samp> - 用于定义贴图 Texel 分辨率的参数。如果更改此值，则必须重新保存贴图。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_3BD6F80177A84F95ADBD131D303AC5CD"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-85904B7D-5BFE-47EC-968F-9322AC8402B0">$a</samp> - 调用表达式以应用 Ptex 贴图。 
			 </li>
</ul>
 
		  <div class="note tip" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-BD1955EA-B1E1-4DB5-9083-233FC901C700"><span class="tiptitle">提示：</span> 通过在<span class="ph uicontrol">“XGen 表达式编辑器”(XGen Expression Editor)</span>中选择<span class="ph uicontrol">“采样 &gt; 全局 &gt; UI”(Samples &gt; Global &gt; UI)</span>，可以加载预定义的 map_3dpaint 表达式。请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-C64E02E2-0225-4EF5-90FC-FC5C2447B0A7.htm" title="使用表达式为基本体属性和 XGen 修改器生成值。例如，您可以创建表达式来随机化基本体长度的值，或者为“成束”(Clumping)修改器值添加噪波。">使用表达式控制基本体</a>。 
		  </div>
 
		</div>
 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-874986A0-33A7-48B2-8B2F-D8100485C715">有关更复杂的贴图表达式，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-2E36EC1C-9672-4307-96AD-6DB538AF8FE1.htm">贴图表达式示例</a>。另请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-BB575AAB-1185-4496-9B55-4CA20D7BA5E5.htm" title="将 Ptex 贴图和表达式一起使用，可以为基本体属性生成输出值。例如，可以创建 Ptex 贴图，然后使用表达式来更改贴图值影响基本体颜色的方式。">使用 Ptex 贴图和表达式</a>。 
		</p>
 
	 </div>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_4C6C2F8915994B02B7091F96E0273318"><h2 class="title sectiontitle">随机化表达式</h2> 
		 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-B29CB442-626C-4691-854A-7ECA48DF96AF">此随机化表达式根据最小和最大输入值生成随机输出值。您可以使用它来改变属性值，如<span class="ph uicontrol">“长度”(Length)</span>和<span class="ph uicontrol">“宽度”(Width)</span>。它可用作全局表达式来影响大量属性（请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-0113ECF3-A06E-4393-B557-CCC4516C4ED0.htm" title="可以使用全局表达式设置具有相同计算值的多个属性。">创建全局表达式</a>）。 
		</p>
 
		<pre class="pre codeblock">$min= 0.4000; #0.10,1.00
$max=3.000; #1.0,5.0
rand($min,$max)
</pre>
 
		<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_D945FC00310E42AA9BD0EA9A38B1BBED"><h3 class="title sectiontitle">表达式说明</h3> 
		   
		  <ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_6555631D769F41D186956D10CCDB7574"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_61C437325AA94DFE9678CA832BFAE7BD"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-136ADF35-F229-4441-A23B-73483DB18D69">$min</samp> 和 <samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-E7CD6A6E-3173-46C6-8EAE-EA998EF46644">$max</samp> - 为随机化函数的最小和最大输入值声明的局部变量。将为这些变量创建滑块控件。最大值 (<samp class="ph codeph">$max</samp>) 最初设置为 3.000，滑块控件范围为 1.0 到 5.0。最小值 (<samp class="ph codeph">$min</samp>) 最初设置为 0.400，滑块控件范围为 0.10 到 1.00。使用这些滑块控件可更改输入值。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_FB17F94726AE4374AD1D0C4C244C2185"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-FD9CDB4E-DC4C-4DA8-9820-B65154346EF7">rand ($min, $max)</samp> - 随机化函数 使用局部变量进行求值，以生成介于由 <samp class="ph codeph">$min</samp> 和 <samp class="ph codeph">$max</samp> 局部变量所设置范围内的随机值。 
			 </li>
</ul>
 
		  <p class="p"> 
		  </p>
 
		</div>
 
	 </div>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_01B16FF19BCA430DA0C7179A348A611B"><h2 class="title sectiontitle">噪波表达式</h2> 
		 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-64A79031-F878-4565-9D1D-99A4A5A6A1D0">噪波表达式包含以向量或浮点值作为输入变量的噪波函数。使用噪波表达式可生成属性值的变化。例如，噪波表达式可以向<span class="ph uicontrol">“成束”(Clumping)</span>修改器或头发长度的效果添加细微变化。 
		</p>
 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-5AE47DD2-085E-4A6E-AF19-36A711406A46"> 
		</p>
 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-B9FC42C0-E923-402E-92DA-60613053AEFC">在这个简单的表达式中，噪波是使用单一柏林噪波函数计算得出的。您可以通过包含其他数学函数（例如，<samp class="ph codeph"> contrast()</samp> 或 <samp class="ph codeph">smoothstep()</samp>）增加表达式的复杂度，从而产生分层噪波效果。多个噪波层可能会打破单一噪波函数的重复性。有关更复杂的噪波表达式，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-B4A3599D-D37B-4698-84ED-66203B75E87B.htm">噪波表达式示例</a>。 
		</p>
 
		<pre class="pre codeblock">$hi =50.0; #0.00,100.00
$lo =-10.00; #-100.00,0.00
noise($lo, $hi)</pre>
 
		<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_F5F8982DE9454131A79597A1810CB1E5"><h3 class="title sectiontitle">表达式说明</h3> 
		   
		  <ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_22B64A96A7DC4C569FFE539051D1B405"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_64FA3BC3950845E39FB96BAF9AAF86C3"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-4FB08578-3F71-4EEE-9C13-CF11ED3248FE">$hi =50; #0.00, 100.0</samp> 和 <samp class="ph codeph">$lo =-10.00; #-100.00,0.00</samp> - 为噪波函数进行求值所使用的输入值声明的局部变量。高值 (<samp class="ph codeph">$hi</samp>) 最初设置为 50，滑块控件范围为 0 到 100。低值 (<samp class="ph codeph">$lo</samp>) 最初设置为 -10，滑块控件范围为 -100 到 0。使用这些滑块控件可更改噪波函数的输出。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_82E3A29929924213B44C1525BB389BA5"> <samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-84E33414-6A45-42F2-9E15-63A2741A72D8">noise ()</samp> 函数根据 <samp class="ph codeph">$hi</samp> 和 <samp class="ph codeph">$lo</samp> 局部变量输出二维噪波图案。您可以向表达式添加其他局部变量，并将其作为函数的第三个输入值包括在内，以创建三维噪波。 
			 </li>
</ul>
 
		</div>
 
	 </div>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_18567CB27907489291070305025A8691"><h2 class="title sectiontitle"> 条件表达式</h2> 
		 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-C6A0E6ED-750C-466E-AD8D-C78E34FF6947">使用此类表达式可根据是否满足条件设置属性值或应用修改器。例如，与“成束”(Clumping)修改器配合使用时，可以根据相应长度设置应用于每根头发的成束数量。 
		</p>
 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-446C495F-7A6A-4873-92D4-8603396B6695">此表达式可用于根据最终基本体长度应用属性或修改器值，如<span class="ph uicontrol">“幅值”(Magnitude)</span>。 
		</p>
 
		<pre class="pre codeblock">$a =$cLength;
$max =7.00; #0.00,10.0
clamp($a,0,$max)</pre>
 
		<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_27B9AB55F8E948DCAA9B6DE65EAFB9FD"><h3 class="title sectiontitle">表达式说明</h3> 
		   
		  <ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_14DA48BA2C74457E8AA43C9E49A146D2"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_8556FF87DCBD4734A0A6BDCD809980F9"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-FB39A81C-E9F4-45AA-B647-BD66D2E1E560">$a =$cLength;</samp> - 表示最终计算得出的基本体长度的全局变量。例如，如果要为头发长度生成随机值（请参见上面的随机化表达式示例），则在此表达式中，这些值将由 <samp class="ph codeph">$a</samp> 表示。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_EF24FDC0D96B4679B771D1246087A6CF"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-F8E2E27B-0CF5-4A4C-90E3-EDB11A3882A7">$max</samp> - 为最大输入值声明的局部变量。在此表达式中，它设置最大头发长度。将为此值创建滑块控件。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_22E3424A2EE0497C88C8C008FCE73F2F"><samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-FB847E90-59BB-4789-A654-75FB9AE55236">clamp($a,0,$max)</samp> - 当在长度属性中使用时，<samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-5E478408-3949-438C-8DBF-E7818C0F8EC7">clamp()</samp> 函数可得出每个基本体最终计算得出的长度之乘积 (<samp class="ph codeph">$a</samp>)，并将长度设置为介于 0 和设置的 <samp class="ph codeph">$max</samp> 值之间。此表达式还可在修改器中用于影响长发，而不仅仅是短发，因为短发的 <samp class="ph codeph">$cLength</samp> 值较低。 
			 </li>
</ul>
 
		</div>
 
	 </div>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_50839D0D62BB4E8D8388E109942BAE1B"><h2 class="title sectiontitle">使用表达式扩大函数输入值范围</h2> 
		 
		<p class="p" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-C650CB22-BA5C-431E-ADCA-26161437AD3E">使用表达式可向范围受限的函数输入值添加粒度。例如，<samp class="ph codeph" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__GUID-27B60B9B-FB63-47FF-A8D6-4566850B76E7">smoothstep()</samp> 接受输入范围 0 到 1。该示例表达式通过使用两个局部变量和 <samp class="ph codeph">fit()</samp> 函数扩大此函数的范围。您可以轻松修改此表达式来扩大其他函数的输出范围。 
		</p>
 
		<pre class="pre codeblock">$Scalemin=0.3;
$Scalemax=4.0;
smoothstep(x,$Scalemin,$Scalemax)-&gt;fit(0,1,-100,100)
</pre>
 
		<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_51A8FB207D6D48DBB3E7CEDD740ABB98"><h3 class="title sectiontitle">表达式说明</h3> 
		   
		  <ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_4381316B22E24C46AFDA2771954269EB"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_D887E01FB009415CA93A5C165841D57D"><samp class="ph codeph">$Scalemin</samp> 和 <samp class="ph codeph">$Scalemax</samp> - 为设置 <samp class="ph codeph">smoothstep ()</samp> 函数所使用值范围声明的局部变量。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_896E0AB41C1A4D7CA42F64DE0038A93C"><samp class="ph codeph">smoothstep(x,$Scalemin,$Scalemax)</samp> - <samp class="ph codeph">smoothstep()</samp> 用作输入范围受限的函数示例。它根据介于 0 和 1 之间的输入范围输出二次方值。在此示例中，<samp class="ph codeph">x</samp> 表示要使用的输入值，如声明的局部变量或全局变量。在使用此表达式之前，您需要将 <samp class="ph codeph">x</samp> 替换为适当的变量。<samp class="ph codeph">$Scalemin</samp> 和 <samp class="ph codeph">$Scalemax</samp> 设置函数的输出范围。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_27286982FBB5467391A9E6764D22CFAF"><samp class="ph codeph">-&gt;</samp> - 将箭头右侧的函数应用于左侧函数的运算符。在这种情况下，<samp class="ph codeph">fit()</samp> 应用于 <samp class="ph codeph">smoothstep()</samp> 的输出。 
			 </li>
<li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_D5774113A63F4D998BC732EACE90A9D2"><samp class="ph codeph">fit(0,1, -100, 100)</samp> - 将输入值范围从 0 到 1 扩大至 -100 到 100 的函数。 
			 </li>
</ul>
 
		</div>
 
	 </div>
<div class="section" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__SECTION_FE0995F06D8F48F2A39EAE716BEA3452"><h2 class="title sectiontitle">相关主题</h2> 
		 
		<ul class="ul" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__UL_A562B3BD2CC540EDB11EE7E91FB0273A"><li class="li" id="GUID-72119439-1CDA-4094-BB94-03BECF23DF3A__LI_3C7B1293D96B4D50958B1E37C2612284"><a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-C64E02E2-0225-4EF5-90FC-FC5C2447B0A7.htm" title="使用表达式为基本体属性和 XGen 修改器生成值。例如，您可以创建表达式来随机化基本体长度的值，或者为“成束”(Clumping)修改器值添加噪波。">使用表达式控制基本体</a> 
		  </li>
</ul>
 
	 </div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-CharEffEnvBuild/files/GUID-EF55C3B5-D09B-4B6A-BB80-574A0311EE0F.htm" title="本部分提供了大量 seExpr 表达式示例，可供您用于修饰和景观场景。提供面向所有用户级别的示例，包括面向新用户的基本表达式。">XGen 表达式示例</a></div>
</div>
</div>

</body>
</html>
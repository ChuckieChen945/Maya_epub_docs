<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-SimulationEffects">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-93D459A2-2612-47E7-8521-4B587473EB9B">
<meta name="language" content="CHS">
<title>使用流体形状着色器为粒子着色</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>使用流体形状着色器为粒子着色</h1></div>
</div>
</div>

<div class="body" id="WS17956D7ADBC6E73632B18718117AE31604F-7FF6"><p class="li listintro" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-590D">使用流体形状着色器来为粒子着色</p>
<ol class="ol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-590E"><li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-590C">创建<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-CCB74768-7A22-4BD2-A8AC-A698E6E99D70">“云”(Cloud)</span> (s/w) 粒子系统。详细信息请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-SimulationEffects/files/GUID-87BE424C-46D1-4245-9546-86C44797B104.htm">创建 nParticle</a>。 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-590B">在粒子形状上单击鼠标右键，然后从弹出菜单中选择<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-30E4CDFC-F5C9-4645-B5D2-8372933F58C1">“指定新材质”(Assign New Material)</span>。 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-575EAB4C124F5234AA818DF">在<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-F2027AD3-A2F2-44CC-910E-6A053687F733">“指定新材质”(Assign New Material)</span>窗口中，单击 <img class="image" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__IMAGE_7EC2CC6B0C8C446591394EB12644CEF7" width="51" height="13" src="../images/GUID-DB685391-BF82-48C2-A249-A5E59BC79769.png">。 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-575EAB4C124F5234AA818E0">Maya 会创建一个流体容器（fluidShape 节点）。容器将显示在场景中，但仅在粒子上渲染。 
		  </p>
 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5909">将内容添加到容器。有关添加内容的信息，请参见<a class="xref" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-SimulationEffects/files/GUID-14AA33D0-D6D3-49FE-8B42-3AF702D96D7D.htm">向流体容器添加属性</a>。 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5908">在<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-DAE9377F-B896-4BF7-9369-EF06C416DAC0">属性编辑器</span>中修改流体属性。 
		  <div class="note tip" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5907"><span class="tiptitle">提示：</span>  
			 <ul class="ul" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5906"><li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5905">将<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-A9FC57AF-7686-4532-8C4D-EAD1374E7554">“衰减形状”(Dropoff Shape)</span>设定为<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-DC559163-1B94-4AC5-96F3-A65D1691FF6F">“球体”(Sphere)</span>，以便粒子不会有硬边。 
				</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5904">开始时减少<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-B351845D-C1EA-4743-A556-7E60FF477BAC">“质量”(Quality)</span>值以减少渲染时间，同时只在需要时增加该值。 
				</li>
</ul>
 
		  </div>
 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5903">渲染场景。 
		</li>
<li class="li" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5902">基于年龄修改粒子外观（这与与普通粒子着色器的方式一样）： 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5901">创建<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-E42DE8C5-3BF5-4E91-BEEA-8B975714DD61">“粒子采样器”(Particle Sampler)</span>实用程序 (particleSamplerInfo)，并连接所需每粒子属性（如 normalizedAge）到要控制 fluidShape 上的任意<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-EABF2783-A3EB-409E-8C9E-2FC40BCA6669">“着色”(Shading)</span>”属性中。（按住 Shift 键并使用鼠标中键将 particleSamplerInfo 节点拖动到 fluidShape 节点上，并使用<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-BD32738F-5FDE-41F5-985A-CCBE615BBDE4">“连接编辑器”(Connection Editor)</span>）。 
		  </p>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-5900">可以连接到 fluidShape 节点显示在<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-79CA37DF-E592-42E7-90AE-C5E5769402A1">“属性编辑器”(Attribute Editor)</span>的<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-9544322C-DC5C-4A19-BDA7-08AA849ED79C">“着色”(Shading)</span>、<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-2BDFF567-E3C9-4E0C-B2CA-C9B9A9AD0DCD">“照明”(Lighting)</span>和<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-BC41457E-9826-4B6A-B2ED-1783DAE3F009">“纹理”(Texture)</span>部分的任何属性。<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-8E45B590-4CB2-4FAC-AC18-DA50F507AA9E">“密度比例”(Density Scale)</span>或<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-7FA0E767-2633-449C-AE6F-91C31D71E7E2">“粘度”(Viscosity)</span>等其他属性不会每像素求值，因此将不使用粒子<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-8B6D91D2-84CF-4ABE-9C0A-026E07F2993D">“SamplerInfo”</span>。 
		  </p>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-58FF">通过这种方式，可以每个粒子的纹理放置、颜色、不透明度等都不相同，同时基于粒子年龄来更改。 
		  </p>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-58FE">只需启用 fluidShape 节点上的<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-5653907A-82F5-44ED-8974-B3B1210C9037">“自身阴影”(Self Shadow)</span>，就可以使每个液体粒子有内部自身阴影。 
		  </p>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-58FD">如果希望粒子投射阴影到其他粒子上，则必须使用光线跟踪，并在 particleShape 上的隐藏属性中设定一个标志： 
		  </p>
 
		  <pre class="pre codeblock">
setAttr particleShape1.ignoreSelfShadowing 1
</pre>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-58FC">这将避免粒子在其自己的阴影触角中计算（当为流体启用<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-C22E701C-DCEE-4950-A823-AAF64DFB3E39">“自身阴影”(Self Shadow)</span>后，这将更加高效地计算）。 
		  </p>
 
		  <p class="p" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__WS73099CC142F48755-3D114B7511841AEFA9F-58FB">渲染时处于活动状态的<span class="ph uicontrol" id="GUID-93D459A2-2612-47E7-8521-4B587473EB9B__GUID-37FF652A-2E40-4C18-9C58-8919B43183D1">“渲染统计信息”(Render Stats)</span>是 particleShape 而不是 fluidShape 上的信息，因为 particleShape 用于定义几何体，而流体只能使用着色器。 
		  </p>
 
		</li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-SimulationEffects/files/GUID-039C3703-6653-4A40-B01E-E31E419D73A4.htm">纹理和着色流体</a></div>
</div>
</div>

</body>
</html>
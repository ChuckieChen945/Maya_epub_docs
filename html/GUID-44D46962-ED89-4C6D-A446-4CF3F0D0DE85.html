<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="topic-type" content="topic">

<meta name="product" content="MAYAUL">
<meta name="release" content="2025">
<meta name="book" content="GeneralUser">
<meta name="component" content="Maya-Scripting">
<meta name="created" content="30/7/2024">
<meta name="generatedby" content="TRIDION">
<meta name="user-comments" content="disable">
<meta name="topicid" content="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85">
<meta name="language" content="CHS">
<title>优化脚本</title>

	<link rel="stylesheet" type="text/css" href="../style/client.css">
	<script type="text/javascript" src="../scripts/client.js"><!--filler--></script>
</head>
<body id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85">
<div class="head"><div class="head-block"><div class="button-info"><span id="infoline"> </span></div>
<div class="ancestry"> </div>
<div class="head-text"><h1>优化脚本</h1></div>
</div>
</div>

<div class="body"><div class="section" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__WS73099CC142F48755-3D114B7511841AEFA9F-7A9"><h2 class="title sectiontitle">在声明中指定数组大小（当其已知时）</h2>

<p class="p" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__WS73099CC142F48755-3D114B7511841AEFA9F-7A8"> 例如，使用 <samp class="ph codeph" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__GUID-5AA3F3BB-8C3F-4F98-A6D5-216C093D16E7">float $a[42];</samp> 代替 <samp class="ph codeph" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__GUID-F68DF520-AFF4-45E9-A633-7543426EFCA8">float $a[];</samp>。可以根据需要扩大所有数组，因此，如果并不确切知道数组可存放的元素数量，但知道一个合理的最大值，则请使用该值。如果没有指定大小，MEL 将使用 16 个元素的默认大小来为数组分配内存。例如，使用</p>

<pre class="pre codeblock">
float $a[50]; $a=`someCmd`;
</pre>

<p class="p" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__WS73099CC142F48755-3D114B7511841AEFA9F-7A5">其中，<samp class="ph codeph" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__GUID-CEF820D4-9405-49E1-92AA-B92BE60C41F2">someCmd</samp> 通常返回 50 个以下对象。出于相同的原因，请在初始化数组时使用显式大小。例如，使用</p>

<pre class="pre codeblock">
float $a[15] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15};
</pre>

</div>
<div class="section" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__WS73099CC142F48755-3D114B7511841AEFA9F-7A4"><h2 class="title sectiontitle">使用显式声明将生成更快的可执行文件</h2>

<p class="p" id="GUID-44D46962-ED89-4C6D-A446-4CF3F0D0DE85__WS73099CC142F48755-3D114B7511841AEFA9F-7A3"> 如果 MEL 在编译时具有完整的类型信息，则可生成可执行文件，这些文件使用特定于这些数据类型的函数来运行脚本。如果 MEL 在编译时无法确定变量的类型，则它必须推迟对运行时的类型检查。如果编译时已知类型信息，则可避免该项开销。</p>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/Maya-Scripting/files/GUID-64B0ADDF-7939-456B-9F64-D90C8402803E.htm">优化脚本和表达式速度</a></div>
</div>
</div>

</body>
</html>
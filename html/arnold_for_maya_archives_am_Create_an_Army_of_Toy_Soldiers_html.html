<!DOCTYPE html><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <link rel="stylesheet" href="../style/client.css" type="text/css">

  <meta name="experiencelevel" content="general">
  <meta name="audience" content="user">
  <meta name="language" content="CHS">
  <meta name="product" content="MAYAUL">
  <meta name="release" content="2025">
  <meta name="book" content="GeneralUser">
  <meta name="component" content="AR-Maya">
  <meta name="topicid" content="arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html">
  
  <meta name="generatedby" content="CLC">
  <meta name="topic-type" content="reference">
  <meta name="contextid" content="AM_CREATE_AN_ARMY_OF_TOY_SOLDIERS">
  <meta name="keyword" content="关键字占位符">

  <script src="../scripts/client.js" type="text/javascript"><!--filler--></script>
  <meta name="alt-title" content=" 创建玩具士兵部队 - Arnold for Maya">

<title>创建玩具士兵部队</title>

</head>
<body>
  <a name="top"></a>
  <link rel="stylesheet" type="text/css" href="../style/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="../style/additions.css">
  <link rel="stylesheet" type="text/css" href="../style/font-awesome.min.css">

  <div class="body_content" id="body-content">
  <link rel="stylesheet" type="text/css" href="../style/arnold.css">





<div class="head-block"><h1>创建玩具士兵部队</h1></div><p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-soldiers-hill-1280-1.jpg" alt=""></p>
<p>在本教程中，您将重温童年时代与玩具士兵玩耍时的欢乐时光。但与童年时代不同的是，您将使用 XGen 以表达式和纹理贴图作为遮罩将士兵排成有趣的队形。我们还将介绍使用表达式和纹理贴图为单个士兵添加颜色的方法。为了获取一些现实生活的灵感，您还可以了解<a href="https://www.mrjoeblack.com/" target="_blank">艺术家 1</a> 和<a href="http://www.jeanpierreseguin.com/fr?version=desktop" target="_blank">艺术家 2</a> 的一些作品。两位艺术家都使用玩具士兵和其他素材创作有趣的艺术作品。</p>
<p>本教程分为以下章节：</p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-CreatingtheArchiveFiles">创建归档文件</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-CreatingtheXGenDescription">创建 XGen 描述</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-GeneratorAttributes">生成器属性</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-AssigningRandomColorstotheSoldiersusinganExpression">使用表达式为士兵指定随机颜色</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-UsinganExpressionasaMask">使用表达式作为遮罩</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-UsingaTextureMapasaMask">使用纹理贴图作为遮罩</a></p>
<p><a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html#CreateanArmyofToySoldiers-Workflowissue-PrimitiveBound">工作流问题 - 基本体边界</a></p>
<p><strong>要下载玩具士兵模型，请单击<a href="https://areadownloads.autodesk.com/wdm/arnold/mtoa/Soldiers.zip" target="_blank">此处</a>。</strong></p>

<div class="callout callout-tip">
<div class="callout-title"><i class="callout-icon fa fa-lightbulb-o" aria-hidden="true"></i>提示：</div>
<div class="callout-body">

<p>最后记得要与朋友们分享玩具士兵，不要将好玩的东西据为己有哦。</p>

</div></div>

<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2014-3-4-11-23-51-2.png" alt=""></p>
<h2 id="">创建归档文件</h2><ul>
<li>首先，在 Maya 中打开玩具士兵文件。我们需要先将单个士兵模型转化为 XGen 归档，以便可以在 XGen 中使用它们。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-14-15-3.png" alt=""></p>
<ul>
<li>分别选择每个士兵，然后转到<strong><em>“生成 &gt; 将当前选择项导出为归档...”(Generate &gt; Export Selection as Archive(s)...)</em></strong>。选择一个归档名称和目标文件夹，然后选择<strong>“导出”(Export)</strong>。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-18-52-4.png" alt=""></p>
<h2 id="xgen">创建 XGen 描述</h2><ul>
<li>创建一个多边形平面，并将其缩放到要用士兵填充的大小。将多边形平面的<strong><em>“高度”(Height)</em></strong> 和<strong><em>“宽度”(Width)</em></strong> <strong>细分数</strong>至少增大到 5。</li>
</ul>
<p>XGen 归档基本体的数量与多边形平面的细分数量有关。如果您发现士兵未填满整个平面，则需要为多边形平面添加更多细分。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-subdivisions-plane-1-5.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-poly-plane-subdivisions-1-6.jpg" alt=""></td>
</tr>
</tbody></table>
<p><sub><strong>只有 1 个细分的多边形平面。士兵未填满平面</strong></sub></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-subdivisions-plane-5-7.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-subdivisions-render-5-8.jpg" alt=""></td>
</tr>
</tbody></table>
<p><sub><strong>具有 5 个细分的多边形平面。士兵填满整个平面</strong></sub></p>
<ul>
<li>选择多边形平面后，转到<strong><em>“生成 &gt; 创建 XGen 描述”(Generate &gt; Create XGen Description)</em></strong>。选择<strong><em>“自定义几何体/归档文件(用于已创建的任何模型)”(Custom Geometry/Archives (use for any model you have created))</em></strong>。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-26-36-9.png" alt=""></p>
<ul>
<li>建议先降低<strong>“预览/输出”(Preview/Output)</strong>选项卡中的<strong><em>“百分比”(Percent)</em></strong>值，然后再继续操作。如果<strong><em>“百分比”(Percent)</em></strong>的值过高，您可能会发现计算机会因生成大量的基本体而停止运行。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-26-59-10.png" alt=""></p>
<ul>
<li>在<strong>“归档文件”(Archive Files)</strong>下，选择<strong><em>“添加”(Add)</em></strong>，然后转到之前保存士兵归档的位置。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-38-51-11.png" alt=""></p>
<ul>
<li>我们可以更改每个士兵的图标颜色，甚至可以添加图像图标来表示每个归档。要执行此操作，请右键单击一个归档文件的红色方块，然后选择<strong>“编辑”(Edit)</strong>。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-10-16-39-43-12.png" alt=""></p>
<ul>
<li>单击<strong>缩略图文件夹图标</strong>，然后选择一个位图表示每个士兵。在下面的示例中，可以看到我们对每个士兵的 Maya 视口进行了截屏，并将这些图像保存为文件。我们还可以更改图标的颜色，以及调整上面的滑块来增大图标大小：</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-14-15-13.png" alt=""></p>
<h2 id="density">密度(Density)</h2><ul>
<li>将<strong>“密度”(Density)</strong>增加至 500 左右。这将增加多边形平面上的士兵基本体的数量。</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-density-500-14.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-density-1000-15.jpg" alt=""></td>
</tr>
<tr>
<td>500</td>
<td>1000</td>
</tr>
</tbody></table>
<h2 id="">放置士兵</h2><p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2014-2-21-16-16-44-16.png" alt=""></p>
<h2 id="">生成器属性</h2><p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-15-44-17.png" alt=""></p>
<p><em>“生成基本体”(Generate Primitives)</em>设置为<em>“以统一的行和列”(In uniform rows and columns)</em>时，<em>“间距”(Spacing)</em>属性将替换<em>“密度”(Density)</em>。增大“间距”(Spacing)属性会增加基本体之间的距离。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-random--18.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-rows-columns--19.jpg" alt=""></td>
</tr>
<tr>
<td>生成基本体(Generate Primitives)：随机横跨曲面(Randomly across the surface)</td>
<td>生成基本体(Generate Primitives)：以统一的行和列(In uniform rows and columns)</td>
</tr>
</tbody></table>
<h2 id="">使用表达式为士兵指定随机颜色</h2>
<div class="callout callout-note">
<div class="callout-title"><i class="callout-icon fa fa-pencil" aria-hidden="true"></i>注意：</div>
<div class="callout-body">

<p>有关如何执行此操作的详细信息，请参见<a href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/am-Archives/arnold_for_maya_archives_am_Create_an_Army_of_Toy_Soldiers_html.html">为基本体指定随机颜色</a>教程。</p>

</div></div>

<ul>
<li>创建一个 <em>Ai 用户数据颜色</em>节点，并将其连接到指定给士兵 XGen 描述的 <a href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?p=MAYAUL&amp;l=CHS&amp;accessmode=live&amp;v=2025&amp;guid=arnold_for_maya_surface_am_Standard_Surface_html">standard_surface</a> 着色器的<em>“颜色”(Color)属性</em>。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-18-45-20.png" alt=""></p>
<p><sub><strong><em>userdata_color</em> -&gt; <em>standard_surface.color</em></strong></sub></p>
<ul>
<li>在 Ai 用户数据颜色节点的<em>“颜色属性名称”(Color Attr Name)</em>中键入 <em>color</em>。我们将在 XGen 描述中使用相同的<em>“颜色”(Color)</em>名称。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-19-58-21.png" alt=""></p>
<p><sub><strong>将名称“color”添加到 Ai 用户数据颜色节点中的“颜色属性名称”(Color Attr Name)</strong></sub></p>
<ul>
<li>MtoA 不会对 Ai 用户数据颜色节点进行 Gamma 校正。因此，您需要在 <strong>Ai 用户数据颜色</strong> 节点与标准曲面着色器的<strong>“颜色”(Color)</strong> <strong>属性</strong> 之间添加一个 <strong>*Maya</strong> <strong>Gamma 校正*</strong> 节点，如下所示。将“Gamma RGB”的值更改为 0.454。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-21-9-22.png" alt=""></p>
<ul>
<li><p>渲染场景。士兵是黑色的，因为 <strong>Ai 用户数据颜色</strong>的<strong><em>“默认值”(Default Value)</em></strong>为黑色。我们需要使用 XGen 中的<strong>“自定义着色器参数”(Custom Shader Parameters)</strong>将其连接到 XGen 描述。</p>
</li>
<li><p>单击 XGen 中的<strong>“预览/输出”(Priview/Output)</strong>选项卡，并打开<strong><em>“输出设置”(Output Settings)</em></strong>。您应该会在下方看到<strong>“自定义着色器参数”(Custom Shader Parameters)</strong>。我们将在这里添加表达式。</p>
</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-22-47-23.png" alt=""></p>
<p><sub><strong>自定义着色器参数(Custom Shader Parameters)（底部）</strong></sub></p>
<ul>
<li>在<strong>“名称”(Name)</strong>文本字段中，键入用于 <strong>Ai 用户数据颜色</strong>节点的<strong><em>“颜色属性名称”(Color Attr Name)</em></strong>的相同名称。在本例中，我们使用单词<strong>“Color”</strong>。单击<strong>“浮点”(float)</strong>并将其更改为<strong><em>“颜色”(Color)</em></strong>，因为这是我们想要更改的属性。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-24-14-24.png" alt=""></p>
<p><sub><strong>“自定义着色器参数”(Custom Shader Parameters)设置为“颜色”(Color)</strong></sub></p>
<ul>
<li>单击新的<strong><em>“color color”</em></strong>参数右侧的<strong>“XGen 表达式编辑器”(XGen Expression Editor)图标</strong> <img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-24-37-25.png" alt="">，然后在<strong>“XGen 表达式编辑器”(XGen Expression Editor)</strong>中添加以下文本：</li>
</ul>
<p><code>$factor = 0.1920;</code></p>
<p><code>$a=[rand( 0.3, 0.65 ,$id)*$factor,rand( 0.4, 0.45 ,$id+1)*$factor,rand( 0.25, 0.55 ,$id+2)*$factor];#-1.0,1.0</code></p>
<p><code>$a</code></p>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-25-21-26.png" alt=""></p>
<p><sub><strong>自定义颜色的“XGen 表达式编辑器”(XGen Expression Editor)</strong></sub></p>
<ul>
<li>渲染场景。此时您应该会看到程序将根据上面使用的随机值随机创建士兵的颜色。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2014-2-20-15-28-46-27.png" alt=""></p>
<h2 id="">使用遮罩</h2><h2 id="">使用表达式作为遮罩</h2><p>我们还可以使用表达式来定义每个多边形面上显示的士兵数量。</p>
<ul>
<li>单击<strong><em>遮罩</em></strong>滑块控件右侧的<strong>表达式</strong>图标 <img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-24-37-28.png" alt="">，然后在“XGen 表达式编辑器”(XGen Expression Editor)中键入以下文本：</li>
</ul>
<pre class="pre codeblock"><code class="prettyprint"> $border = 0.1150; </code></pre><pre class="pre codeblock"><code class="prettyprint"> $u &gt; $border &amp;&amp; $u &lt; (1-$border) &amp;&amp; $v &gt; $border &amp;&amp; $v &lt; (1-$border) </code></pre><p>对于每个面，可以使用 $u 和 $v 获取 UV 坐标。使用此表达式，仅填充 U 大于 0.2 且小于 0.8，V 大于 0.2 且小于 0.8 的位置。这样，我们将在多边形平面每个面的中间获得一个方形。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-mask-0-1-29.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-mask-0-2-30.jpg" alt=""></td>
</tr>
<tr>
<td>$border = 0.1000</td>
<td>$border = 0.2000</td>
</tr>
</tbody></table>
<h2 id="">使用纹理贴图作为遮罩</h2><p>我们还可以使用黑白栅格纹理编排我们这支军队的队形。</p>
<ul>
<li>单击<strong>“遮罩”(Mask)</strong>右侧的向下箭头 <img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-26-3-31.png" alt="">。选择<strong><em>“创建贴图...”(Create Map...)</em></strong>（请务必注意，仅当平面指定有 Maya 着色器时，该选项才有效）。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-27-36-32.png" alt=""></p>
<ul>
<li><strong>“贴图名称”(Map Name)</strong>应为<strong><em>“mask”</em></strong>。将<strong>“贴图分辨率”(Map Resolution)</strong>增加到 200 左右。这将按每个面的 Texel 数设置 PTEX 贴图的分辨率。使用高分辨率纹理时，请使用更大的“贴图分辨率”(Map Resolution)值。完成后，单击<strong>“创建”(Create)</strong>。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-28-3-33.png" alt=""></p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-grid-formation-2--34.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-checker-render-1--35.jpg" alt=""></td>
</tr>
<tr>
<td>栅格纹理贴图用作密度遮罩</td>
<td>棋盘格纹理贴图用作密度遮罩</td>
</tr>
</tbody></table>
<p>下面的示例显示了另一个使用颜色纹理驱动密度遮罩的示例。</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-rwb-random-36.jpg" alt=""></td>
<td><img src="../images/am-Create_an_Army_of_Toy_Soldiers-in-uniform-rows-and-columns-37.jpg" alt=""></td>
</tr>
<tr>
<td>圆形贴图用于颜色和密度（放置基本体：“随机横跨曲面”(Randomly across the surface)）</td>
<td>圆形贴图仅用于颜色（放置基本体：“以统一的行和列”(In uniform rows and columns)）</td>
</tr>
</tbody></table>
<ul>
<li>如果我们反转用于遮罩的贴图，可以在用于颜色贴图的白色区域获得透明效果。</li>
</ul>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-2-38.png" alt=""></p>
<p>用于遮罩的贴图将发生反转，因此士兵不会显示在黑色区域。</p>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-mask-39.jpg" alt=""></p>
<h2 id="img-src-images-tutorials-am-create_an_army_of_toy_soldiers-image2016-5-11-9-30-55-40-png-alt">工作流问题 - 基本体边界<img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2016-5-11-9-30-55-40.png" alt=""></h2><p>在下面的渲染中，可以看到右上角出现一些“剪裁”。这是因为边界框区域设置得过低，而程序不会在此区域外部渲染士兵。增大<strong><em>“基本体边界”(Primitive Bound)</em></strong>可以解决此问题。此选项位于<strong>“预览/输出”(Preview/Output)</strong>选项卡下的<strong><em>“输出设置”(Output Settings)</em></strong>中。</p>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2014-2-24-11-20-55-41.png" alt=""></p>
<p><sub><strong>为基本体边界设置的值对于 XGen 归档基本体来说尚不够大</strong></sub></p>
<h2 id="">总结</h2><p>有关如何在 XGen 中创建遮罩以及为基本体归档玩具士兵模型上色的教程到此结束。希望本教程能给您带来乐趣。但是，现在该把玩具士兵收起来啦，快去整理房间！</p>
<p><img src="../images/am-Create_an_Army_of_Toy_Soldiers-image2014-2-24-12-50-6-42.png" alt=""></p>
<p><sup><em>感谢 <strong><a class="external-link" href="http://www.pedrofe.com/" rel="nofollow" target="_blank">Pedro Fernando Gómez</a></strong> 在 XGen 方面提供的帮助。</em></sup></p>

  <div class="related-links">
  
    <div class="familylinks">
      <div class="parentLink">
        <strong>父页面:</strong> <a class="link" href="https://help.autodesk.com/cloudhelp/2025/CHS/AR-Maya/files/am-Arnold_for_Maya_User_Guide/tutorials/am-XGen_Tutorials/arnold_for_maya_xgen_am_Archives_html.html">归档</a>
      </div>
  
    </div>
  
    </div></div>

    

</body>
</html>